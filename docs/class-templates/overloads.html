<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>10.2. Overloading operator[] &#8212; CISC 187 Course Reader Overview</title>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../_static/matrixeq.css?v=58BC228F" />
    <link rel="stylesheet" type="text/css" href="../_static/CodeChat.css" />
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/handsontable@7.2.2/dist/handsontable.full.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/webgldemo.css?v=B36B48D" />
    <link rel="stylesheet" type="text/css" href="../_static/webglinteractive.css?v=910DF1E1" />
    <link rel="stylesheet" type="text/css" href="../_static/accessibility.css?v=50109A2C" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-3.4.1/css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/presenter_mode.css?v=9FF1320F" />
    <link rel="stylesheet" type="text/css" href="../_static/jquery-ui-1.10.3.custom.min.css?v=97E0178A" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../_static/user-highlights.css?v=A2326E52" />
    <link rel="stylesheet" type="text/css" href="../_static/runestone-custom-sphinx-bootstrap.css?v=5.5.5" />
    <link rel="stylesheet" type="text/css" href="../_static/theme-overrides.css?v=2DAFE138" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script src="../_static/pytutor-embed.bundle.js?v=268B5C04"></script>
    <script src="../_static/matrixeq.js?v=D64CFA5A"></script>
    <script src="../_static/animationbase.js?v=A043C3A7"></script>
    <script src="../_static/html4css1.css?v=4533ACD3"></script>
    <script src="../_static/jquery.highlight.js?v=F1C496C8"></script>
    <script src="../_static/sql-wasm.js?v=D71B5933"></script>
    <script src="https://cdn.jsdelivr.net/npm/handsontable@7.2.2/dist/handsontable.full.js"></script>
    <script src="../_static/webglinteractive.js?v=2B768384"></script>
    <script src="../_static/FileSaver.min.js?v=8408C997"></script>
    <script src="../_static/Blob.js?v=AEC2447"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.i18n/1.0.5/jquery.i18n.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.i18n/1.0.5/jquery.i18n.emitter.bidi.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.i18n/1.0.5/jquery.i18n.emitter.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.i18n/1.0.5/jquery.i18n.fallbacks.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.i18n/1.0.5/jquery.i18n.messagestore.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.i18n/1.0.5/jquery.i18n.parser.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.i18n/1.0.5/jquery.i18n.language.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega@4.0.0-rc.2/build/vega.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@2.5.0/build/vega-lite.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@3.14.0/build/vega-embed.js"></script>
    <script src="../_static/runestone.js?v=92D8BBF0"></script>
    <script src="../_static/jquery-ui-1.10.3.custom.min.js?v=2B07FE4F"></script>
    <script src="../_static/bootstrap-3.4.1/js/bootstrap.min.js"></script>
    <script src="../_static/jquery-fix.js?v=1226591B"></script>
    <script src="../_static/bootstrap-sphinx.js"></script>
    <script src="../_static/jquery.idle-timer.js?v=E942DAF1"></script>
    <script src="../_static/presenter_mode.js?v=2DF16FB4"></script>
    <script src="../_static/theme.js?v=D899FB97"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="10.3. Container classes" href="containers.html" />
    <link rel="prev" title="10.1. Class templates" href="templates.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
<link rel="shortcut icon" href="/cisc187-reader/static/favicon.ico" type="image/ico" />

<script type="text/javascript">
  eBookConfig = {};
  
    eBookConfig.useRunestoneServices = false;
    eBookConfig.host = 'https://daveparillo.github.io/cisc187-reader/' || 'http://127.0.0.1:8000';
    eBookConfig.app = eBookConfig.host+'/cisc187-reader';
    eBookConfig.course = 'cisc187-reader';
    eBookConfig.basecourse = 'cisc187-reader';
    eBookConfig.isLoggedIn = false;
  
  eBookConfig.ajaxURL = eBookConfig.app+'/ajax/';
  eBookConfig.logLevel = 0;
  eBookConfig.loginRequired = false;
  eBookConfig.build_info = "unknown";
  eBookConfig.python3 = true;
  eBookConfig.acDefaultLanguage = 'cpp' ? 'cpp' : 'python'
  eBookConfig.runestone_version = '5.5.5';
  eBookConfig.jobehost = 'https://fierce-ridge-58946.herokuapp.com/http://jobe2.cosc.canterbury.ac.nz';
  eBookConfig.proxyuri_runs = '/jobe/index.php/restapi/runs/';
  eBookConfig.proxyuri_files = '/jobe/index.php/restapi/files/';
  eBookConfig.enable_chatcodes = false ? false : false;


</script>

<!-- Ad Serving Headers Only serve ads to Anonymous Users -->





  </head><body>


<!-- Begin navbar -->
<div id="navbar" class="navbar navbar-default navbar-fixed-top" role="navigation">

  <div class="container">

    <div class="navbar-header">
      <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
      <button type='button' class='navbar-toggle' data-toggle="collapse" data-target=".navbar-ex1-collapse">
        <span class="icon-bar" aria-label="navbar toggle" class="visuallyhidden">toggle navbar</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div>
        
          <a class="brand-logo" style='background: transparent url("../_static/img/logo_small.png") no-repeat 0px 0px;'>&nbsp;<span aria-label="logo" class="visuallyhidden">Runestone Logo</span> </a>
        
        <a class="navbar-brand" href="../index.html" aria-label="index-page">
          
          cisc187-reader
        </a>
      </div>
    </div>



    <div class="navbar-collapse collapse navbar-ex1-collapse">
      <ul class="nav navbar-nav navbar-right" >

        <li class="divider-vertical"></li>


        <!-- social media dropdown -->
        <!-- end social media dropdown -->

        <li class="divider-vertical"></li>

        <!-- search dropdown -->
        <li class="dropdown">
          <a class="dropdown-toggle" href="#" data-toggle="dropdown">
            <i class="glyphicon glyphicon-search" style='opacity:0.9;'><span aria-label="Search" class="visuallyhidden">Search</span></i>
          </a>
          <ul class='dropdown-menu'>
            
                <li><a href='../index.html' aria-label="index-page">Table of Contents</a></li>
            
            <li><a href='../genindex.html'>Book Index</a></li>
            <li class="divider"></li>
            <li style="width: 240px;">
              <form class="navbar-search" style="margin:10px;" action="../search.html" method="get">
                <div class="input-group">
                  <input type="text" class="form-control" name="q" placeholder="Search this book" />
                  <span class="input-group-btn">
                    <button class="btn btn-primary" style="margin:0;" type="submit">
                      <i class="glyphicon glyphicon-search"></i>
                    </button>
                  </span>
                </div><!-- /input-group -->
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
            </li>
          </ul>
        </li>
        <!-- end search dropdown -->

        <li class="divider-vertical"></li>

        
        <li class="divider-vertical"></li>
        <!-- <li id="scratch_ac_link"><a href="javascript:ACFactory.toggleScratchActivecode()">Scratch ActiveCode</a></li> -->

        <!-- <li class="dropdown">             -->
          <li id="scratch_ac_link" class="dropdown"><a href="javascript:ACFactory.toggleScratchActivecode()">
              <i class="glyphicon glyphicon-pencil" style="opacity:0.9;"><span aria-label="Scratch Activecode" class="visuallyhidden">Scratch Activecode</span></i></a></li>
        <!-- </li> -->

        <li class="divider-vertical"></li>

        
      </ul>

      <ul class="nav navbar-nav">
        <li class="divider-vertical"></li>
        
          
          <li class="divider-vertical"></li>
        
        <!-- 
          
  <li id="relations-prev" title="Previous Chapter - <span class="section-number">10.1. </span>Class templates" data-toggle="tooltip">
    <a href="templates.html" >
      <i class='glyphicon glyphicon-backward' style='opacity:0.9;'></i>
    </a>
  </li>
  
  <li id="relations-next" title='Next Chapter - <span class="section-number">10.3. </span>Container classes' data-toggle="tooltip" >              
    <a href="containers.html" >
        <i class='glyphicon glyphicon-forward' style='opacity:0.9;'></i>
    </a>
  </li>
  <li class="divider-vertical"></li>

<script type="text/javascript">
  opts = {'placement':'bottom',
          'selector': '',
          'delay': { show: 100, hide: 50}
         };

  $('#relations-prev').tooltip(opts);
  $('#relations-next').tooltip(opts);
</script>
        -->
        
          <li></li>
        
      </ul>

      </div> <!-- navbar -->







    </div> <!-- container -->
  </div>
</div>


<div class="container" id="continue-reading"></div>

<div class="container" id="main-content" role="main">
<!-- Ad Serving for Runestone Campaign -->


  
  <div class="section" id="overloading-operator">
<span id="index-0"></span><h1><span class="section-number">10.2. </span>Overloading <code class="docutils literal notranslate"><span class="pre">operator[]</span></code><a class="headerlink" href="#overloading-operator" title="Permalink to this headline">¶</a></h1>
<p>User-defined types that provide array-like access that allows both reading and writing
often overload <code class="docutils literal notranslate"><span class="pre">operator[]</span></code>.</p>
<p>One of the rules of the language is that <code class="docutils literal notranslate"><span class="pre">operator[]</span></code> must be implemented
as a member function.
Generally <code class="docutils literal notranslate"><span class="pre">const</span></code> and non-const versions of the overload are implemented.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span> <span class="nc">T</span>
<span class="p">{</span>
          <span class="n">value_t</span><span class="o">&amp;</span> <span class="k">operator</span><span class="p">[](</span><span class="kt">size_t</span> <span class="n">index</span><span class="p">)</span>       <span class="p">{</span> <span class="k">return</span> <span class="n">data</span><span class="p">[</span><span class="n">index</span><span class="p">];</span> <span class="p">}</span>
    <span class="k">const</span> <span class="n">value_t</span><span class="o">&amp;</span> <span class="k">operator</span><span class="p">[](</span><span class="kt">size_t</span> <span class="n">index</span><span class="p">)</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">data</span><span class="p">[</span><span class="n">index</span><span class="p">];</span> <span class="p">}</span>
<span class="p">};</span>
</pre></div>
</div>
<p>In addition to the member-only rule that the C++ language requires,
there are a few best practice considerations for this operator.
They mostly center around the fact that <cite>operator[]`</cite> can only accept a single value.
What if you want to use this operator in a user defined type that
behaves like a multi-dimensional array?</p>
<p>Often people attempt to overload <cite>operator[][]</cite> - but it does not exist.</p>
<p>In general, if you have a type with single dimension access,
then it’s OK to overload <code class="docutils literal notranslate"><span class="pre">operator[]</span></code>.
If your type has data in multiple dimensions, then
prefer overloading <code class="docutils literal notranslate"><span class="pre">operator()</span></code> instead.
For a detailed description of the <em>why</em>, refer to the following subsection.</p>
<div class="section" id="multi-dimension-array-access">
<h2><span class="section-number">10.2.1. </span>Multi-dimension array access<a class="headerlink" href="#multi-dimension-array-access" title="Permalink to this headline">¶</a></h2>
<p>To provide multidimensional array access semantics,
e.g. to implement a 3D array access <code class="docutils literal notranslate"><span class="pre">a[i][j][k]</span> <span class="pre">=</span> <span class="pre">x;</span></code>,
the overload for <code class="docutils literal notranslate"><span class="pre">operator[]</span></code> must return a reference to a 2D object,
which has to have its own <code class="docutils literal notranslate"><span class="pre">operator[]</span></code> which returns a reference to a 1D object,
which has to have <code class="docutils literal notranslate"><span class="pre">operator[]</span></code> which returns a reference to the element.
To avoid this complexity,
some libraries opt for overloading <code class="docutils literal notranslate"><span class="pre">operator()</span></code> instead.</p>
<p>Because <code class="docutils literal notranslate"><span class="pre">operator()</span></code> does not have the one parameter restriction that
<code class="docutils literal notranslate"><span class="pre">operator[]</span></code> does, functions taking multiple parameters can be implemented
directly without any excessive complicated function call chaining.
And for users, the syntax is cleaner:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>

  <span class="n">matrix</span> <span class="n">a</span><span class="p">;</span>

  <span class="c1">// operator[] syntax</span>
  <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">][</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span><span class="p">;</span>

  <span class="c1">// operator() syntax</span>
  <span class="n">a</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">,</span><span class="n">k</span><span class="p">)</span> <span class="o">=</span> <span class="n">value</span><span class="p">;</span>

<span class="p">}</span>
</pre></div>
</div>
<p>In the following example, notice that our matrix class uses a simple
one dimensional array as its <a class="reference internal" href="../glossary.html#term-backing-store"><span class="xref std std-term">backing store</span></a>.
So even though our class exposes a two-dimensional interface,
our data is stored differently.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">data_</span> <span class="o">=</span> <span class="k">new</span> <span class="n">T</span><span class="p">[</span><span class="n">rows</span> <span class="o">*</span> <span class="n">cols</span><span class="p">];</span>
</pre></div>
</div>
<p>An array is simple and efficient.
The class does not expose this implementation detail and if we wanted
to replace the array with something else later,
no matrix class users would be affected.</p>
<div id='matrix_tab1' data-component="tabbedStuff"  class='alert alert-warning'><div data-component="tab" data-tabname="operator() Example" >
<p>When using the <code class="docutils literal notranslate"><span class="pre">operator()</span></code> overload,
only a single pair of functions is required,
one function to return the value
and other to return a value that can be assigned to a <code class="docutils literal notranslate"><span class="pre">const</span></code>.</p>
<p>This solution is general and scales up and down as needed,
easily accommodating more or fewer dimensions.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">T</span><span class="o">&amp;</span> <span class="n">matrix</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="k">operator</span><span class="p">()</span> <span class="p">(</span><span class="kt">size_t</span> <span class="n">row</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">col</span><span class="p">);</span>

<span class="k">const</span> <span class="n">T</span><span class="o">&amp;</span> <span class="n">matrix</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="k">operator</span><span class="p">()</span> <span class="p">(</span><span class="kt">size_t</span> <span class="n">row</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">col</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>
</pre></div>
</div>
<p>One note about the above examples.
If you know the type <code class="docutils literal notranslate"><span class="pre">T</span></code> is a primitive type,
or you have a non-templated matrix and you define your value type
to be a built in type (int, double, etc), then you should
return by value instead of const reference.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">double</span><span class="o">&amp;</span> <span class="n">matrix</span><span class="o">::</span><span class="k">operator</span><span class="p">()</span> <span class="p">(</span><span class="kt">size_t</span> <span class="n">row</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">col</span><span class="p">);</span>

<span class="k">const</span> <span class="kt">double</span> <span class="n">matrix</span><span class="o">::</span><span class="k">operator</span><span class="p">()</span> <span class="p">(</span><span class="kt">size_t</span> <span class="n">row</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">col</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>
</pre></div>
</div>
<p>The non-const version should still be a reference to the value in the
<a class="reference internal" href="../glossary.html#term-backing-store"><span class="xref std std-term">backing store</span></a>, so that it can be modified.</p>
<p>If you don’t want users modifying your data at all, then only provide
a <code class="docutils literal notranslate"><span class="pre">const</span></code> version of the operator overload.</p>
</div><div data-component="tab" data-tabname="Run It" >

<div class="runestone explainer ac_section alert alert-warning">
<div data-component="activecode" id=ac_matrix_function_call_operator >
<div id=ac_matrix_function_call_operator_question class="ac_question col-md-12">

</div>
<textarea data-lang="cpp" id="ac_matrix_function_call_operator_editor" data-question_label="10.2.1.1" 
      data-timelimit=25000     
    data-audio=''      
    data-compileargs="[&#x27;-Wall&#x27;, &#x27;-Wextra&#x27;, &#x27;-pedantic&#x27;, &#x27;-std=c++11&#x27;]"       data-wasm=/_static
    style="visibility: hidden;">
#include <algorithm>
#include <cstdlib>
#include <iostream>
#include <stdexcept>

template <class T>
class matrix {
public:
  matrix(size_t rows, size_t cols);
  T& operator() (size_t row, size_t col);
  const T&  operator() (size_t row, size_t col) const;
  // ...
 ~matrix();
  explicit matrix(const matrix& m);
  // matrix& operator= (const matrix& m);
  // many other useful functions not implemented
private:
  size_t rows_;
  size_t cols_;
  T* data_;
};

template <class T>
inline
matrix<T>::matrix(size_t rows, size_t cols)
  : rows_ (rows)
  , cols_ (cols)
{
  if (rows == 0 || cols == 0)
    throw std::out_of_range("Matrix constructor has 0 size");
  data_ = new T[rows * cols];
  for (size_t i = 0; i < rows_*cols_; ++i) {
      data_[i] = 0;
  }
}

template <class T>
inline
matrix<T>::matrix(const matrix<T>& m)
  : rows_ (m.rows_)
  , cols_ (m.cols_)
{
  std::copy(m.data_, m.data_+rows_*cols_, data_);
}

template <class T>
inline
matrix<T>::~matrix()
{
  delete[] data_;
}

template <class T>
inline
T& matrix<T>::operator() (size_t row, size_t col)
{
  if (row >= rows_ || col >= cols_)
    throw std::out_of_range("Matrix subscript out of bounds");
  return data_[cols_*row + col];
}

template <class T>
inline
const T& matrix<T>::operator() (size_t row, size_t col) const
{
  if (row >= rows_ || col >= cols_)
    throw std::out_of_range("const Matrix subscript out of bounds");
  return data_[cols_*row + col];
}

int main()
{
    matrix<double>a {3,5};
    a(0,0) = -1;
    a(1,1) = 1;
    a(1,2) = 2;
    a(1,3) = 3;
    a(2,4) = 5;

    for (size_t i = 0; i<3; ++i) {
      for (size_t j = 0; j<5; ++j) {
         std::cout << a(i,j) << ' ';
      }
        std::cout << '\n';
    }
}
</textarea>
</div>
</div>
</div>
    </div>

<p>In the interest of completeness, the following example shows one way to
implement a 2D matrix class that provides an interface for <code class="docutils literal notranslate"><span class="pre">my_matrix[i][j]</span></code>.
This example uses a vector of vectors,
although other solutions are possible.</p>
<div id='matrix_tab2' data-component="tabbedStuff"  class='alert alert-warning'><div data-component="tab" data-tabname="operator[] Example" >
<p>What are the main differences from the preceding implementation?</p>
<p>The backing store is a vector of vectors:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&gt;</span> <span class="n">data_</span><span class="p">;</span>
</pre></div>
</div>
<p>As previously discussed, the <code class="docutils literal notranslate"><span class="pre">operator[]</span></code> takes at most a
single parameter.
This means we must return a <code class="docutils literal notranslate"><span class="pre">vector&lt;T&gt;&amp;</span></code> from our operator.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&amp;</span> <span class="k">operator</span><span class="p">[]</span> <span class="p">(</span><span class="kt">size_t</span> <span class="n">row</span><span class="p">);</span>
</pre></div>
</div>
<p>How does the second dimension work?</p>
<p>Recall that the vector class has its own <code class="docutils literal notranslate"><span class="pre">operator[]</span></code> overload.
The final dimension with the element value is retrieved from
the index into the column vector of the matrix.</p>
<p>A destructor is no longer needed because this version of the matrix
class does not manage its own memory.
All the memory management is handled by the vector class.</p>
</div><div data-component="tab" data-tabname="Run It" >

<div class="runestone explainer ac_section alert alert-warning">
<div data-component="activecode" id=ac_matrix_index_operator >
<div id=ac_matrix_index_operator_question class="ac_question col-md-12">

</div>
<textarea data-lang="cpp" id="ac_matrix_index_operator_editor" data-question_label="10.2.1.2" 
      data-timelimit=25000     
    data-audio=''      
    data-compileargs="[&#x27;-Wall&#x27;, &#x27;-Wextra&#x27;, &#x27;-pedantic&#x27;, &#x27;-std=c++11&#x27;]"       data-wasm=/_static
    style="visibility: hidden;">
#include <cstdlib>
#include <iostream>
#include <vector>

template <class T>
class matrix {
  public:
    matrix(size_t rows, size_t cols);
    explicit matrix(const matrix& m);

    std::vector<T>& operator[] (size_t row);
    const std::vector<T>& operator[] (size_t row) const;

    size_t rows() const {return data_.size(); }
    size_t cols() const
    {
        return rows()? data_[0].size(): 0;
    }
  private:
    std::vector<std::vector<T>> data_;
};

template <class T>
inline
matrix<T>::matrix(size_t rows, size_t cols)
  : data_ (rows)
{
  for (auto& row: data_) {
    row.resize(cols);
  }
}

template <class T>
inline
matrix<T>::matrix(const matrix<T>& m)
  : data_ (m.data_)
{ }

template <class T>
inline
std::vector<T>& matrix<T>::operator[] (size_t row)
{
    return data_[row];
}

template <class T>
inline
const std::vector<T>& matrix<T>::operator[] (size_t row) const
{
  return data_[row];
}

int main()
{
    matrix<double>a {3,5};
    a[0][0] = -1;
    a[1][1] = 1;
    a[1][2] = 2;
    a[1][3] = 3;
    a[2][4] = 5;

    for (size_t i = 0; i<3; ++i) {
      for (size_t j = 0; j<5; ++j) {
         std::cout << a[i][j] << ' ';
      }
        std::cout << '\n';
    }
}
</textarea>
</div>
</div>
</div>
    </div>

<hr class="docutils" />
<div class="admonition-more-to-explore admonition">
<p class="admonition-title">More to Explore</p>
<ul class="simple">
<li><p><a class="reference external" href="https://stackoverflow.com/questions/4421706/what-are-the-basic-rules-and-idioms-for-operator-overloading">Operator overloading in C++</a> from stackoverflow.</p></li>
<li><p><a class="reference external" href="https://isocpp.org/wiki/faq/operator-overloading#matrix-subscript-op">ISO C++ FAQ: ‘How do I create a subscript operator for a Matrix class?’</a></p></li>
</ul>
</div>
</div>
</div>


  <div id=scprogresscontainer>
    You have attempted <span id=scprogresstotal></span> of <span id=scprogressposs></span> activities on this page <div id="subchapterprogress"></div>
  </div>
  
      
<ul>
  <li id="relations-prev" style="opacity:0.4" onmouseover="mouseOverPrev()" onmouseout="mouseOutPrev()"class="navLink" title='Previous Section - 10.1. Class templates' data-toggle="tooltip">
    <a href="templates.html" aria-label="10.1. Class templates">
        <div style="background-color: white; border-style:solid; border-color:lightgrey; border-width:2px; width:100px; height:50px">
            <i class='prevNav glyphicon glyphicon-chevron-left'  style="top:50%; transform:translateY(-50%)translateX(-50%); left: 50%; color:black;"></i>
        </div>
    </a>
  </li>
</ul>

  
<ul>
  <li id="relations-next" style="opacity:0.4" onmouseover="mouseOverNext()" onmouseout="mouseOutNext()" class="navLink" title='Next Section - 10.3. Container classes' data-toggle="tooltip" >
    <a href="containers.html" aria-label="10.3. Container classes">
      <div style="background-color: white; border-style:solid; border-color:lightgrey; border-width:2px; width:100px; height:50px">
          <i id="relationsNextIcon" class='nextNav glyphicon glyphicon-chevron-right' style="top:50%; transform:translateY(-50%)translateX(-50%); left: 50%; color:black; "></i>
      </div>
    </a>
  </li>
</ul>

<script type="text/javascript">

  $('#relations-prev').tooltip({'placement':'right', 'selector': '', 'delay': { show: 100, hide: 50}});
  $('#relations-next').tooltip({'placement':'left', 'selector': '', 'delay': { show: 100, hide: 50}});

</script>

<script>
	function mouseOverPrev() {
		document.getElementById("relations-prev").style.opacity=1;
	}

	function mouseOutPrev() {
		document.getElementById("relations-prev").style.opacity=0.4;
	}
	function mouseOverNext() {
		document.getElementById("relations-next").style.opacity=1;
	}

	function mouseOutNext() {
		document.getElementById("relations-next").style.opacity=0.4;
	}
</script>
  
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      
      | <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2017-2020 Dave Parillo.
      Created using <a href="http://runestoneinteractive.org/">Runestone</a> 5.5.5.
    </p>
  </div>
</footer>




<script> getSwitch(); </script>


  </body>
</html>