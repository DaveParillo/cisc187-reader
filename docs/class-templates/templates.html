<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <title>10.1. Class templates &#8212; CISC 187 Course Reader Overview</title>
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../_static/matrixeq.css?v=58BC228F" />
    <link rel="stylesheet" type="text/css" href="../_static/CodeChat.css" />
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/handsontable@7.2.2/dist/handsontable.full.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/webgldemo.css?v=B36B48D" />
    <link rel="stylesheet" type="text/css" href="../_static/webglinteractive.css?v=910DF1E1" />
    <link rel="stylesheet" type="text/css" href="../_static/accessibility.css?v=DB047029" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-3.4.1/css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/presenter_mode.css?v=9FF1320F" />
    <link rel="stylesheet" type="text/css" href="../_static/jquery-ui-1.10.3.custom.min.css?v=97E0178A" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../_static/user-highlights.css?v=A2326E52" />
    <link rel="stylesheet" type="text/css" href="../_static/runestone-custom-sphinx-bootstrap.css?v=5.0.8" />
    <link rel="stylesheet" type="text/css" href="../_static/theme-overrides.css?v=2DAFE138" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script src="../_static/pytutor-embed.bundle.js?v=268B5C04"></script>
    <script src="../_static/matrixeq.js?v=D64CFA5A"></script>
    <script src="../_static/animationbase.js?v=A043C3A7"></script>
    <script src="../_static/html4css1.css?v=4D8F3FB4"></script>
    <script src="../_static/jquery.highlight.js?v=F1C496C8"></script>
    <script src="../_static/sql-wasm.js?v=44FE0709"></script>
    <script src="https://cdn.jsdelivr.net/npm/handsontable@7.2.2/dist/handsontable.full.js"></script>
    <script src="../_static/webglinteractive.js?v=2B768384"></script>
    <script src="../_static/FileSaver.min.js?v=8408C997"></script>
    <script src="../_static/Blob.js?v=AEC2447"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.i18n/1.0.5/jquery.i18n.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.i18n/1.0.5/jquery.i18n.emitter.bidi.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.i18n/1.0.5/jquery.i18n.emitter.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.i18n/1.0.5/jquery.i18n.fallbacks.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.i18n/1.0.5/jquery.i18n.messagestore.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.i18n/1.0.5/jquery.i18n.parser.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.i18n/1.0.5/jquery.i18n.language.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega@4.0.0-rc.2/build/vega.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@2.5.0/build/vega-lite.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@3.14.0/build/vega-embed.js"></script>
    <script src="../_static/runestone.js?v=343ECCF5"></script>
    <script src="../_static/jquery-ui-1.10.3.custom.min.js?v=2B07FE4F"></script>
    <script src="../_static/bootstrap-3.4.1/js/bootstrap.min.js"></script>
    <script src="../_static/jquery-fix.js?v=1226591B"></script>
    <script src="../_static/bootstrap-sphinx.js"></script>
    <script src="../_static/jquery.idle-timer.js?v=E942DAF1"></script>
    <script src="../_static/presenter_mode.js?v=2DF16FB4"></script>
    <script src="../_static/theme.js?v=D899FB97"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="10.2. Overloading operator[]" href="overloads.html" />
    <link rel="prev" title="10. Class templates" href="index.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
<link rel="shortcut icon" href="/cisc187-reader/static/favicon.ico" type="image/ico" />

<script type="text/javascript">
  eBookConfig = {};
  
    eBookConfig.useRunestoneServices = false;
    eBookConfig.host = 'https://daveparillo.github.io/cisc187-reader/' || 'http://127.0.0.1:8000';
    eBookConfig.app = eBookConfig.host+'/cisc187-reader';
    eBookConfig.course = 'cisc187-reader';
    eBookConfig.basecourse = 'cisc187-reader';
    eBookConfig.isLoggedIn = false;
  
  eBookConfig.ajaxURL = eBookConfig.app+'/ajax/';
  eBookConfig.logLevel = 0;
  eBookConfig.loginRequired = false;
  eBookConfig.build_info = "unknown";
  eBookConfig.python3 = true;
  eBookConfig.acDefaultLanguage = 'cpp' ? 'cpp' : 'python'
  eBookConfig.runestone_version = '5.0.8';
  eBookConfig.jobehost = 'https://fierce-ridge-58946.herokuapp.com/http://jobe2.cosc.canterbury.ac.nz';
  eBookConfig.proxyuri_runs = '/jobe/index.php/restapi/runs/';
  eBookConfig.proxyuri_files = '/jobe/index.php/restapi/files/';
  eBookConfig.enable_chatcodes = false ? false : false;


</script>

<!-- Ad Serving Headers Only serve ads to Anonymous Users -->





  </head><body>


<!-- Begin navbar -->
<div id="navbar" class="navbar navbar-default navbar-fixed-top" role="navigation">

  <div class="container">

    <div class="navbar-header">
      <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
      <button type='button' class='navbar-toggle' data-toggle="collapse" data-target=".navbar-ex1-collapse">
        <span class="icon-bar" aria-label="navbar toggle" class="visuallyhidden">toggle navbar</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div>
        
          <a class="brand-logo" style='background: transparent url("../_static/img/logo_small.png") no-repeat 0px 0px;'>&nbsp;<span aria-label="logo" class="visuallyhidden">Runestone Logo</span> </a>
        
        <a class="navbar-brand" href="../index.html" aria-label="index-page">
          
          cisc187-reader
        </a>
      </div>
    </div>



    <div class="navbar-collapse collapse navbar-ex1-collapse">
      <ul class="nav navbar-nav navbar-right" >

        <li class="divider-vertical"></li>


        <!-- social media dropdown -->
        <!-- end social media dropdown -->

        <li class="divider-vertical"></li>

        <!-- search dropdown -->
        <li class="dropdown">
          <a class="dropdown-toggle" href="#" data-toggle="dropdown">
            <i class="glyphicon glyphicon-search" style='opacity:0.9;'><span aria-label="Search" class="visuallyhidden">Search</span></i>
          </a>
          <ul class='dropdown-menu'>
            
                <li><a href='../index.html' aria-label="index-page">Table of Contents</a></li>
            
            <li><a href='../genindex.html'>Book Index</a></li>
            <li class="divider"></li>
            <li style="width: 240px;">
              <form class="navbar-search" style="margin:10px;" action="../search.html" method="get">
                <div class="input-group">
                  <input type="text" class="form-control" name="q" placeholder="Search this book" />
                  <span class="input-group-btn">
                    <button class="btn btn-primary" style="margin:0;" type="submit">
                      <i class="glyphicon glyphicon-search"></i>
                    </button>
                  </span>
                </div><!-- /input-group -->
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
            </li>
          </ul>
        </li>
        <!-- end search dropdown -->

        <li class="divider-vertical"></li>

        
        <li class="divider-vertical"></li>
        <!-- <li id="scratch_ac_link"><a href="javascript:ACFactory.toggleScratchActivecode()">Scratch ActiveCode</a></li> -->

        <!-- <li class="dropdown">             -->
          <li id="scratch_ac_link" class="dropdown"><a href="javascript:ACFactory.toggleScratchActivecode()">
              <i class="glyphicon glyphicon-pencil" style="opacity:0.9;"><span aria-label="Scratch Activecode" class="visuallyhidden">Scratch Activecode</span></i></a></li>
        <!-- </li> -->

        <li class="divider-vertical"></li>

        
      </ul>

      <ul class="nav navbar-nav">
        <li class="divider-vertical"></li>
        
          
          <li class="divider-vertical"></li>
        
        <!-- 
          
  <li id="relations-prev" title="Previous Chapter - <span class="section-number">10. </span>Class templates" data-toggle="tooltip">
    <a href="index.html" >
      <i class='glyphicon glyphicon-backward' style='opacity:0.9;'></i>
    </a>
  </li>
  
  <li id="relations-next" title='Next Chapter - <span class="section-number">10.2. </span>Overloading <code class="docutils literal notranslate"><span class="pre">operator[]</span></code>' data-toggle="tooltip" >              
    <a href="overloads.html" >
        <i class='glyphicon glyphicon-forward' style='opacity:0.9;'></i>
    </a>
  </li>
  <li class="divider-vertical"></li>

<script type="text/javascript">
  opts = {'placement':'bottom',
          'selector': '',
          'delay': { show: 100, hide: 50}
         };

  $('#relations-prev').tooltip(opts);
  $('#relations-next').tooltip(opts);
</script>
        -->
        
          <li></li>
        
      </ul>

      </div> <!-- navbar -->







    </div> <!-- container -->
  </div>
</div>


<div class="container" id="continue-reading"></div>

<div class="container" id="main-content" role="main">
  
  <div class="section" id="class-templates">
<span id="index-0"></span><h1><span class="section-number">10.1. </span>Class templates<a class="headerlink" href="#class-templates" title="Permalink to this headline">¶</a></h1>
<p>C++ allows writing class templates using the same syntax used to write function templates.
We use templates in classes for the same reason we use templates in functions:
when we want to use variables without making a commitment to a fixed type.
A class template is <strong>not</strong> a class.
It defines instructions the compiler uses to create classes as needed.
No code is generated from a source file that contains only template definitions.
In order for any code to appear, a template must be instantiated:
the template arguments must be provided so that the compiler can generate an actual class.
Class template type cannot be deduced from the passed parameters
in the way that function templates may.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="p">,</span> <span class="k">class</span> <span class="nc">U</span><span class="o">&gt;</span>
<span class="k">struct</span> <span class="n">pair</span> <span class="p">{</span>
  <span class="n">T</span> <span class="n">first</span><span class="p">;</span>
  <span class="n">U</span> <span class="n">second</span><span class="p">;</span>
<span class="p">};</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">pair</span><span class="o">&lt;</span><span class="kt">char</span><span class="p">,</span> <span class="kt">int</span><span class="o">&gt;</span> <span class="n">symbol</span> <span class="o">=</span> <span class="p">{</span><span class="sc">&#39;A&#39;</span><span class="p">,</span> <span class="mi">65</span><span class="p">};</span>
  <span class="k">return</span> <span class="n">symbol</span><span class="p">.</span><span class="n">second</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>A class template allows us to define a family of classes that performs the same
behaviors on many different types.
Container classes are the canonical examples of how templates
can make code maintenance easier.
The following class is a ‘bag’ - a general purpose container.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
<span class="k">class</span> <span class="nc">bag</span> <span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">data</span><span class="p">;</span>

  <span class="k">public</span><span class="o">:</span>
    <span class="kt">void</span> <span class="n">add</span><span class="p">(</span><span class="n">T</span> <span class="n">item</span><span class="p">);</span>
    <span class="kt">void</span> <span class="nf">erase</span><span class="p">(</span><span class="n">bag</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">iterator</span> <span class="n">item</span><span class="p">);</span>
    <span class="kt">void</span> <span class="nf">swap</span><span class="p">(</span><span class="n">bag</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">item</span><span class="p">);</span>
<span class="p">};</span>
</pre></div>
</div>
<p>As this class demonstrates, a <a class="reference external" href="http://en.cppreference.com/mwiki/index.php?search=std::vector">std::vector</a> is a <em>bag</em>:
a general purpose container for (nearly) any type.</p>
<p>Recall the reason why we wanted to create a function template.
We were writing multiple copies of the same functions over and over.
The function bodies were identical except for the types used.
The same applies to class templates:
we want to avoid writing multiple classes that are the same
except for the data stored and types passed to functions.</p>
<div class="section" id="value-class-templates">
<h2><span class="section-number">10.1.1. </span>Value class templates<a class="headerlink" href="#value-class-templates" title="Permalink to this headline">¶</a></h2>
<p>Using the information we have so far, we can create a complete
class template that supports most of the basic operations
we are generally interested in for any value type:</p>
<ul class="simple">
<li><p>Default construct</p></li>
<li><p>Copy and assign values</p></li>
<li><p>Use any relational operation</p></li>
</ul>
<p>The following example uses some common conventions for user defined types:</p>
<ul>
<li><p>Constructors are defined in the class body if they are short
(5 lines of code or less).</p></li>
<li><p>The name <em>other</em> is used as the parameter name for another object
of the same type when passed as the only parameter to a function.</p></li>
<li><p>Binary operator overloads use <em>lhs</em> and <em>rhs</em> to denote the
right-hand side and left-hand side operands of the binary operation.</p></li>
<li><p>The <a class="reference external" href="https://en.cppreference.com/w/cpp/language/member_functions#Special_member_functions">default keyword</a> is used to instruct the compiler to create
the default implementation for the marked special member function.</p>
<p>Only special member functions may be marked <code class="docutils literal notranslate"><span class="pre">default</span></code>.</p>
</li>
</ul>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span> <span class="cp">#pragma once</span>

 <span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="o">&gt;</span>
 <span class="k">struct</span> <span class="n">item</span>
 <span class="p">{</span>
   <span class="n">T</span> <span class="n">value</span><span class="p">;</span>
   <span class="n">item</span><span class="p">()</span> <span class="p">{}</span>
   <span class="o">~</span><span class="n">item</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span>

   <span class="c1">// Copy construct and assignment</span>
   <span class="n">item</span><span class="p">(</span><span class="k">const</span> <span class="n">item</span><span class="o">&amp;</span> <span class="n">other</span><span class="p">)</span> <span class="o">:</span> <span class="n">value</span><span class="p">(</span><span class="n">other</span><span class="p">.</span><span class="n">value</span><span class="p">)</span> <span class="p">{}</span>
   <span class="n">item</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="k">const</span> <span class="n">item</span><span class="o">&amp;</span> <span class="n">other</span><span class="p">)</span> <span class="p">{</span>
     <span class="n">value</span> <span class="o">=</span> <span class="n">other</span><span class="p">.</span><span class="n">value</span><span class="p">;</span>
     <span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span>
   <span class="p">}</span>
   <span class="c1">// Conversions from T and to T:</span>
   <span class="k">explicit</span> <span class="n">item</span><span class="p">(</span><span class="k">const</span> <span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">)</span> <span class="o">:</span> <span class="n">value</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="p">{}</span>
   <span class="k">explicit</span> <span class="k">operator</span> <span class="n">T</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">value</span><span class="p">;</span> <span class="p">}</span>
 <span class="p">};</span>

 <span class="c1">// Non-member functions</span>

 <span class="c1">// Relational operators</span>
 <span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="o">&gt;</span>
   <span class="kr">inline</span> <span class="kt">bool</span> <span class="k">operator</span><span class="o">==</span><span class="p">(</span><span class="k">const</span> <span class="n">item</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&amp;</span> <span class="n">rhs</span><span class="p">,</span> <span class="k">const</span> <span class="n">item</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&amp;</span> <span class="n">lhs</span><span class="p">)</span> <span class="p">{</span>
     <span class="k">return</span> <span class="n">rhs</span><span class="p">.</span><span class="n">value</span> <span class="o">==</span> <span class="n">lhs</span><span class="p">.</span><span class="n">value</span><span class="p">;</span>
   <span class="p">}</span>
 <span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="o">&gt;</span>
   <span class="kr">inline</span> <span class="kt">bool</span> <span class="k">operator</span><span class="o">!=</span><span class="p">(</span><span class="k">const</span> <span class="n">item</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&amp;</span> <span class="n">rhs</span><span class="p">,</span> <span class="k">const</span> <span class="n">item</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&amp;</span> <span class="n">lhs</span><span class="p">)</span> <span class="p">{</span>
     <span class="k">return</span> <span class="o">!</span><span class="p">(</span><span class="n">rhs</span> <span class="o">==</span> <span class="n">lhs</span><span class="p">);</span>
   <span class="p">}</span>
 <span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="o">&gt;</span>
   <span class="kr">inline</span> <span class="kt">bool</span> <span class="k">operator</span><span class="o">&lt;</span><span class="p">(</span><span class="k">const</span> <span class="n">item</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&amp;</span> <span class="n">rhs</span><span class="p">,</span> <span class="k">const</span> <span class="n">item</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&amp;</span> <span class="n">lhs</span><span class="p">)</span> <span class="p">{</span>
     <span class="k">return</span> <span class="n">rhs</span><span class="p">.</span><span class="n">value</span> <span class="o">&lt;</span> <span class="n">lhs</span><span class="p">.</span><span class="n">value</span><span class="p">;</span>
   <span class="p">}</span>
 <span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="o">&gt;</span>
   <span class="kr">inline</span> <span class="kt">bool</span> <span class="k">operator</span><span class="o">&gt;</span><span class="p">(</span><span class="k">const</span> <span class="n">item</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&amp;</span> <span class="n">rhs</span><span class="p">,</span> <span class="k">const</span> <span class="n">item</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&amp;</span> <span class="n">lhs</span><span class="p">)</span> <span class="p">{</span>
     <span class="k">return</span> <span class="n">lhs</span> <span class="o">&lt;</span> <span class="n">rhs</span><span class="p">;</span>
   <span class="p">}</span>
 <span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="o">&gt;</span>
   <span class="kr">inline</span> <span class="kt">bool</span> <span class="k">operator</span><span class="o">&lt;=</span><span class="p">(</span><span class="k">const</span> <span class="n">item</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&amp;</span> <span class="n">rhs</span><span class="p">,</span> <span class="k">const</span> <span class="n">item</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&amp;</span> <span class="n">lhs</span><span class="p">)</span> <span class="p">{</span>
     <span class="k">return</span> <span class="o">!</span><span class="p">(</span><span class="n">y</span> <span class="o">&lt;</span> <span class="n">rhs</span><span class="p">);</span>
   <span class="p">}</span>
 <span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="o">&gt;</span>
   <span class="kr">inline</span> <span class="kt">bool</span> <span class="k">operator</span><span class="o">&gt;=</span><span class="p">(</span><span class="k">const</span> <span class="n">item</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&amp;</span> <span class="n">rhs</span><span class="p">,</span> <span class="k">const</span> <span class="n">item</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&amp;</span> <span class="n">lhs</span><span class="p">)</span> <span class="p">{</span>
     <span class="k">return</span> <span class="o">!</span><span class="p">(</span><span class="n">rhs</span> <span class="o">&lt;</span> <span class="n">lhs</span><span class="p">);</span>
   <span class="p">}</span>

 <span class="c1">// stream extraction</span>
   <span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="o">&gt;</span>
<span class="kr">inline</span> <span class="n">std</span><span class="o">::</span><span class="n">ostream</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">&lt;&lt;</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">ostream</span><span class="o">&amp;</span> <span class="n">os</span><span class="p">,</span> <span class="k">const</span> <span class="n">item</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&amp;</span> <span class="n">lhs</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="n">os</span> <span class="o">&lt;&lt;</span> <span class="n">lhs</span><span class="p">.</span><span class="n">value</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="friend-or-non-friend">
<h2><span class="section-number">10.1.2. </span>Friend or non-friend?<a class="headerlink" href="#friend-or-non-friend" title="Permalink to this headline">¶</a></h2>
<p>Some operators must be implemented as member functions,
<code class="docutils literal notranslate"><span class="pre">operator=</span></code>, <code class="docutils literal notranslate"><span class="pre">operator[]</span></code>, and member access:
both <code class="docutils literal notranslate"><span class="pre">operator.</span></code> and <code class="docutils literal notranslate"><span class="pre">operator-&gt;</span></code>,
because the language requires it.
We have choices where we define the others.</p>
<p>Some are commonly implemented as non-member functions,
because their left operand cannot be modified by you.
The most prominent of these are the stream insertion and extraction operators.
The left operands are stream classes from the standard library which you cannot change.</p>
<p>For operators where you have to choose to either implement them as a
member function or a non-member function,
use the following guidelines:</p>
<ol class="arabic">
<li><p>If it is a <strong>unary operator</strong>,
then implement it as a <strong>member</strong> function.
For example, <code class="docutils literal notranslate"><span class="pre">operator++</span></code>.</p></li>
<li><p>If a binary operator treats both operands equally
then implement as a <strong>non-member</strong> function.</p>
<p>Generally, neither operand is modified in this situation.
The relational operators all fall into this category.</p>
</li>
<li><p>If a binary operator does not treat both of its operands equally
then consider making it a member function.</p>
<p>If the left-hand side operator is modified in the operation,
or the function returns the <code class="docutils literal notranslate"><span class="pre">this</span></code> pointer, then
it should be a member function of the left hand operand type.</p>
<p>Otherwise, it can be implemented as a non-member function.</p>
</li>
</ol>
<p>In the previous section, the relational operators were all declared as
<em>non-friend non-member</em> functions.
This is considered best practice by many programmers.</p>
<blockquote class="epigraph">
<div><p>Prefer writing non-friend non-member functions</p>
<p class="attribution">—Item 44 of <em>C++ Coding Standards</em>, by Herb Sutter and Andrei Alexandrescu</p>
</div></blockquote>
<p>Compare to the functionally similar friend, member overload
for <code class="docutils literal notranslate"><span class="pre">operator==</span></code>:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">friend</span> <span class="kt">bool</span> <span class="k">operator</span><span class="o">==</span><span class="p">(</span><span class="k">const</span> <span class="n">item</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">,</span> <span class="k">const</span> <span class="n">item</span><span class="o">&amp;</span> <span class="n">y</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="n">x</span><span class="p">.</span><span class="n">value</span> <span class="o">==</span> <span class="n">y</span><span class="p">.</span><span class="n">value</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<ul>
<li><p>A non-friend function does not automatically know that a function is
part of a class template unless told.</p>
<p>This is why the non-friend functions repeat the template declaration
from the <code class="docutils literal notranslate"><span class="pre">struct</span></code>.</p>
</li>
<li><p>The friend functions declared in the class are implicitly <em>inlined</em>.
The compiler <em>may</em> replace function calls to these functions with
in-line copies of the function body.
The compiler is not obligated to do so, but usually does.</p>
<p>To get the same behavior from non-member functions, the <a class="reference external" href="http://en.cppreference.com/mwiki/index.php?search=inline">inline</a>
keyword is used.</p>
</li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">friend</span></code> keyword is often used to provide private member access to
non-member functions.
In the case of the <code class="docutils literal notranslate"><span class="pre">item</span></code> struct, this wasn’t needed.</p>
<p>The use of friend here prevents the <code class="docutils literal notranslate"><span class="pre">this</span></code> pointer from being passed
to functions declared (and in this case defined) in the data structure
body.</p>
</li>
</ul>
<hr class="docutils" />
<div class="admonition-more-to-explore admonition">
<p class="admonition-title">More to Explore</p>
<ul class="simple">
<li><p><a class="reference external" href="http://en.cppreference.com/mwiki/index.php?search=friend specifier">friend specifier</a></p></li>
<li><p>Item 44 from <a class="reference external" href="https://www.google.com/search?client=safari&amp;rls=en&amp;q=isbn+978-0321113580">C++ Coding Standards, Sutter and Alexandrescu, 2004.</a></p></li>
<li><p>C++ Core guidelines for <a class="reference external" href="https://isocpp.github.io/CppCoreGuidelines/CppCoreGuidelines#SS-overload">overloads</a></p></li>
</ul>
</div>
</div>
</div>


  <div id=scprogresscontainer>
    You have attempted <span id=scprogresstotal></span> of <span id=scprogressposs></span> activities on this page <div id="subchapterprogress"></div>
  </div>
  
      
<ul>
  <li id="relations-prev" style="opacity:0.4" onmouseover="mouseOverPrev()" onmouseout="mouseOutPrev()"class="navLink" title='Previous Section - 10. Class templates' data-toggle="tooltip">
    <a href="index.html" aria-label="10. Class templates">
        <div style="background-color: white; border-style:solid; border-color:lightgrey; border-width:2px; width:100px; height:50px">
            <i class='prevNav glyphicon glyphicon-chevron-left'  style="top:50%; transform:translateY(-50%)translateX(-50%); left: 50%; color:black;"></i>
        </div>
    </a>
  </li>
</ul>

  
<ul>
  <li id="relations-next" style="opacity:0.4" onmouseover="mouseOverNext()" onmouseout="mouseOutNext()" class="navLink" title='Next Section - 10.2. Overloading  operator[] ' data-toggle="tooltip" >
    <a href="overloads.html" aria-label="10.2. Overloading  operator[] ">
      <div style="background-color: white; border-style:solid; border-color:lightgrey; border-width:2px; width:100px; height:50px">
          <i id="relationsNextIcon" class='nextNav glyphicon glyphicon-chevron-right' style="top:50%; transform:translateY(-50%)translateX(-50%); left: 50%; color:black; "></i>
      </div>
    </a>
  </li>
</ul>

<script type="text/javascript">

  $('#relations-prev').tooltip({'placement':'right', 'selector': '', 'delay': { show: 100, hide: 50}});
  $('#relations-next').tooltip({'placement':'left', 'selector': '', 'delay': { show: 100, hide: 50}});

</script>

<script>
	function mouseOverPrev() {
		document.getElementById("relations-prev").style.opacity=1;
	}

	function mouseOutPrev() {
		document.getElementById("relations-prev").style.opacity=0.4;
	}
	function mouseOverNext() {
		document.getElementById("relations-next").style.opacity=1;
	}

	function mouseOutNext() {
		document.getElementById("relations-next").style.opacity=0.4;
	}
</script>
  
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      
      | <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2017-2020 Dave Parillo.
      Created using <a href="http://runestoneinteractive.org/">Runestone</a> 5.0.8.
    </p>
  </div>
</footer>




<script> getSwitch(); </script>


  </body>
</html>