<!-- ****************************************
     |docname| - main template for this theme
     **************************************** -->
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>3.8. Error handling &#8212; CISC 187 Course Reader Overview</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/basic.css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/accessibility.css?v=50109A2C" />
    <link rel="stylesheet" type="text/css" href="../_static/matrixeq.css?v=58BC228F" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../_static/637.0fa6cababf056764.css?v=F9484CEF" />
    <link rel="stylesheet" type="text/css" href="../_static/runestone.3eb60bc006ae9a54.css?v=3A5A250C" />



    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/animationbase.js?v=A043C3A7"></script>
    <script src="../_static/matrixeq.js?v=D64CFA5A"></script>
    <script src="../_static/runtime.66b619f51b746382.bundle.js?v=C3F69EE5"></script>
    <script src="../_static/637.d54be67956c5c660.bundle.js?v=915B1670"></script>
    <script src="../_static/runestone.ecc6dff5cad8b815.bundle.js?v=AE959292"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<script src="https://media.ethicalads.io/media/client/ethicalads.min.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="3.9. Exception handling" href="exception-handling.html" />
    <link rel="prev" title="3.7. Keyword: auto" href="auto.html" />


<link rel="shortcut icon" href="/cisc187-reader/static/favicon.ico" type="image/ico" />



<link rel="canonical" href="https://{{canonical_host}}{{new_server_prefix}}/books/published/{{base_course}}/{{pagepath}}" />


<script>
  eBookConfig = {};
  
    eBookConfig.useRunestoneServices = false;
    eBookConfig.host = 'https://daveparillo.github.io/cisc187-reader/' || 'http://127.0.0.1:8000';
    eBookConfig.app = eBookConfig.host+'/cisc187-reader';
    eBookConfig.course = 'cisc187-reader';
    eBookConfig.basecourse = 'cisc187-reader';
    eBookConfig.isLoggedIn = false;
    eBookConfig.enableCompareMe = eBookConfig.useRunestoneServices;
    eBookConfig.new_server_prefix = '';
  
  eBookConfig.ajaxURL = eBookConfig.app+'/ajax/';
  eBookConfig.logLevel = 0;
  eBookConfig.loginRequired = false;
  eBookConfig.build_info = "unknown";
  eBookConfig.python3 = true;
  eBookConfig.acDefaultLanguage = 'cpp' ? 'cpp' : 'python'
  eBookConfig.runestone_version = '6.6.2';
  eBookConfig.jobehost = 'https://delicate-frost-8843.fly.dev';
  eBookConfig.proxyuri_runs = '/jobe/index.php/restapi/runs/';
  eBookConfig.proxyuri_files = '/jobe/index.php/restapi/files/';
  eBookConfig.enable_chatcodes = false ? false : false;
  eBookConfig.enableScratchAC = true;

</script>

<!-- Ad Serving Headers Only serve ads to Anonymous Users -->



  </head><body>


<!-- Begin navbar -->
<div id="navbar" class="navbar navbar-default navbar-fixed-top" role="navigation">

  <div class="container">

    <div class="navbar-header">
      <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
      <button type='button' class='navbar-toggle' data-toggle="collapse" data-target=".navbar-ex1-collapse" aria-label="navbar toggle">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div>
        
        
          <div class="brand-logo"><img src="../_static/img/RAIcon.png" alt=""></div>
        
        <a class="navbar-brand" href="../index.html" aria-label="index-page">
          
          cisc187-reader
        </a>
      </div>
    </div>



    <div class="navbar-collapse collapse navbar-ex1-collapse">
      <ul class="nav navbar-nav navbar-right" >

        <li class="divider-vertical"></li>

        <!-- social media dropdown -->
        <!-- end social media dropdown -->

        <li class="divider-vertical"></li>
        <!-- search dropdown -->
        <li class="dropdown">
          <a class="dropdown-toggle" href="#" data-toggle="dropdown">
            <i class="glyphicon glyphicon-search" style='opacity:0.9;'><span class="visuallyhidden" aria-label="Search">Search</span></i>
          </a>
          <ul class='dropdown-menu'>
            
                <li><a href='../index.html' aria-label="index-page">Table of Contents</a></li>
            
            <li><a href='../genindex.html'>Book Index</a></li>
            <li class="divider"></li>
            <li style="width: 240px;">
              <form class="navbar-search" style="margin:10px;" action="../search.html" method="get">
                <div class="input-group">
                  <input type="text" class="form-control" name="q" placeholder="Search this book" />
                  <span class="input-group-btn">
                    <button class="btn btn-primary" style="margin:0;" type="submit">
                      <i class="glyphicon glyphicon-search"></i>
                    </button>
                  </span>
                </div><!-- /input-group -->
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
            </li>
          </ul>
        </li>
        <!-- end search dropdown -->

        <li class="divider-vertical"></li>

        
        <li class="divider-vertical"></li>
        <!-- <li id="scratch_ac_link"><a href="javascript:ACFactory.toggleScratchActivecode()">Scratch ActiveCode</a></li> -->

        <!-- <li class="dropdown">             -->
          <li id="scratch_ac_link" class="dropdown"><a href="javascript:runestoneComponents.popupScratchAC()">
              <i class="glyphicon glyphicon-pencil" style="opacity:0.9;"><span class="visuallyhidden" aria-label="Scratch Activecode" >Scratch Activecode</span></i></a></li>
        <!-- </li> -->

        <li class="divider-vertical"></li>

        
      </ul>

      <ul class="nav navbar-nav">
        <li class="divider-vertical"></li>
        
          
          <li class="divider-vertical"></li>
        
        <!-- 
          
  <li id="relations-prev" title="Previous Chapter - <span class="section-number">3.7. </span>Keyword: <code class="docutils literal notranslate"><span class="pre">auto</span></code>" data-toggle="tooltip">
    <a href="auto.html" >
      <i class='glyphicon glyphicon-backward' style='opacity:0.9;'></i>
    </a>
  </li>
  
  <li id="relations-next" title='Next Chapter - <span class="section-number">3.9. </span>Exception handling' data-toggle="tooltip" >              
    <a href="exception-handling.html" >
        <i class='glyphicon glyphicon-forward' style='opacity:0.9;'></i>
    </a>
  </li>
  <li class="divider-vertical"></li>

<script>
  opts = {'placement':'bottom',
          'selector': '',
          'delay': { show: 100, hide: 50}
         };

  window.addEventListener('load', (event) => {
    $('#relations-prev').tooltip(opts);
    $('#relations-next').tooltip(opts);
  });
</script>
        -->
        
          <li></li>
        
      </ul>
      </div> <!-- navbar-collapse -->
    </div> <!-- navbar -->
  </div> <!-- container -->


<div class="container" id="continue-reading"></div>

<div class="container" id="main-content" role="main">

<!-- Ad Serving for Runestone Campaign -->


  
  <section id="error-handling">
<span id="index-0"></span><h1><span class="section-number">3.8. </span>Error handling<a class="headerlink" href="#error-handling" title="Permalink to this heading">¶</a></h1>
<p>Programmers are expected to create programs that function correctly and run as expected.
Programs need to function ‘correctly’ even in the face of unexpected or unusual conditions.</p>
<p>When the unexpected happens, we need to recover as gracefully as possible.
Sometimes the best option is to clearly communicate what happened and exit.
Abruptly halting or crashing is not generally acceptable.</p>
<p>Error handling involves:</p>
<ul class="simple">
<li><p>Detecting an error</p></li>
<li><p>Transmitting information about an error</p></li>
<li><p>Preserving the valid state of a program</p></li>
<li><p>Avoiding resource leaks</p></li>
</ul>
<p>The rest of this section describes simple error reporting strategies that are compatible with C.</p>
<div id='assert' data-component="tabbedStuff"  class='alert alert-warning '><p>One tried and true way to communicate errors is by returning error values from functions.
We already have been introduced to the <a class="reference external" href="https://en.cppreference.com/w/cpp/error/assert">assert</a> macro to handle errors
in the section <a class="reference internal" href="../build-tools/debugging.html#build-tools-assert"><span class="std std-ref">Assertions</span></a>.</p>
<p>The assert macro is a ‘function-like’ macro that evaluates a boolean expression
and aborts the program if the condition is <code class="docutils literal notranslate"><span class="pre">false</span></code>.
The assert macro is most useful for debugging, but be aware that since it can
easily be disabled, it is hard to depend on in production software.</p>
<p>The macro <code class="docutils literal notranslate"><span class="pre">NDEBUG</span></code>, if defined, will disable all the assert functions in a program.</p>
<div data-component="tab" data-tabname="assert" >
<p>The assert macro takes a single expression.
It does not provide a built-in mechanism for a c</p>

<div class="runestone explainer ac_section ">
<div data-component="activecode" id=error_handling_assert_ac data-question_label="3.8.1">
<div id=error_handling_assert_ac_question class="ac_question">
<p>Try changing the assertions to generate errors.</p>
<p>Then define <code class="docutils literal notranslate"><span class="pre">NDEBUG</span></code> and see what happens.</p>

</div>
<textarea data-lang="cpp" id="error_handling_assert_ac_editor" 
      data-timelimit=25000     
    data-audio=''      
    data-compileargs="[&#x27;-Wall&#x27;, &#x27;-Wextra&#x27;, &#x27;-pedantic&#x27;, &#x27;-std=c++17&#x27;]"       data-wasm=/_static
     style="visibility: hidden;">
// uncomment to disable assert()
// #define NDEBUG
#include <cassert>
#include <iostream>

int main()
{
    assert(2 + 2 == 4);
    std::cout << "Checkpoint #1\n";

    assert(2*2*2 == 8);
    std::cout << "Checkpoint #2\n";
}
</textarea>
</div>
</div>
</div><div data-component="tab" data-tabname="assert messages" >
<p>The assert macro does not provide a built-in mechanism for a
custom user message, but there are a few tricks we can use to
create a compound expression.</p>
<p>While it is treated as a single expressin by assert,
it provides a way to insert a customer error message when the
assertion fails.</p>
<p>Using the comma operator is one technique.
The entire expression is still a single boolean exppression.</p>
<p>After the left-hand side expression is evaluates, it is discarded.
Any side-effects from the evaluated expression remain.
This is what the comma operator does and why
it’s use is generally discouraged.
However, in this case, it’s our message and the program does not need it.</p>
<p>Next the right-hand side is evaluated.
If the expression evaluates to false, the entire expression, along with the
string literal is displayed by assert before the program exits.</p>

<div class="runestone explainer ac_section ">
<div data-component="activecode" id=error_handling_assert_message1_ac data-question_label="3.8.2">
<div id=error_handling_assert_message1_ac_question class="ac_question">

</div>
<textarea data-lang="cpp" id="error_handling_assert_message1_ac_editor" 
      data-timelimit=25000     
    data-audio=''      
    data-compileargs="[&#x27;-Wall&#x27;, &#x27;-Wextra&#x27;, &#x27;-pedantic&#x27;, &#x27;-std=c++17&#x27;]"       data-wasm=/_static
     style="visibility: hidden;">
#include <cassert>
int main()
{
    assert((void("The 'void' here avoids an 'unused value' warning"), 1 == 0));
}
</textarea>
</div>
</div>
<p>Using the relational ‘and’ operator <code class="docutils literal notranslate"><span class="pre">&amp;&amp;</span></code> is another technique.
The entire expression is still a single boolean exppression.</p>
<p>If the left-hand side expression is true, then the right-hand side
is evaluated, but since it is a non-zero literal, it will always be <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p>
<p>If the expression evaluates to false, the entire expression, along with the
string literal is displayed by assert before the program exits.</p>

<div class="runestone explainer ac_section ">
<div data-component="activecode" id=error_handling_assert_message2_ac data-question_label="3.8.3">
<div id=error_handling_assert_message2_ac_question class="ac_question">

</div>
<textarea data-lang="cpp" id="error_handling_assert_message2_ac_editor" 
      data-timelimit=25000     
    data-audio=''      
    data-compileargs="[&#x27;-Wall&#x27;, &#x27;-Wextra&#x27;, &#x27;-pedantic&#x27;, &#x27;-std=c++17&#x27;]"       data-wasm=/_static
     style="visibility: hidden;">
#include <cassert>
int main()
{
    assert((010 + 010 == 15) && "What is 8+8 again?");
}
</textarea>
</div>
</div>
</div>
    </div>

<p>How does the assert macro support our error handling goals?</p>
<ul>
<li><p>Detecting an error</p>
<p>Detection is handled in the boolean expression passed to the macro.
It can only be a single expression and some caution needs to be taken
because “function like” macros are not functions and can behave in unexpected ways.</p>
</li>
<li><p>Transmitting information about an error</p>
<p>The assert macro immediately aborts the program and prints the line number
of the source were the error occurred.</p>
</li>
<li><p>Preserving the valid state of a program</p>
<p>The program immediately terminates.
If your program manages external resources like a file, it may be corrupted
if the program left it in an indeterminate state on exit.</p>
</li>
<li><p>Avoiding resource leaks</p>
<p>This is not applicable since the program terminates.
Any resources opened by the program (memory, file handles, etc.)
will be recovered by the operating system when the program exits.</p>
</li>
</ul>
<p>Another facility C++ inherits from C is the <a class="reference external" href="https://en.cppreference.com/w/cpp/error/errno">errno</a> macro.
errno is a preprocessor macro used for error indication.
The exact definition is implementation defined, but expands to a modifiable <code class="docutils literal notranslate"><span class="pre">int</span></code>.
Several standard library functions indicate errors by writing positive integers to <code class="docutils literal notranslate"><span class="pre">errno</span></code>.
Typically, the value of errno is set to one of the error codes,
listed in the header <a class="reference external" href="https://en.cppreference.com/w/cpp/header/cerrno">cerrno</a> as macro constants that begin with
the letter <strong>E</strong>, followed by uppercase letters or digits.</p>
<div id='errno' data-component="tabbedStuff"  class='alert alert-warning '><div data-component="tab" data-tabname="errno" >
<p>The value of errno is <code class="docutils literal notranslate"><span class="pre">0</span></code> at program startup,
and although library functions are allowed to write positive integers to errno whether
or not an error occurred, library functions never store <code class="docutils literal notranslate"><span class="pre">0</span></code> in errno.</p>

<div class="runestone explainer ac_section ">
<div data-component="activecode" id=error_handling_errno_ac data-question_label="3.8.4">
<div id=error_handling_errno_ac_question class="ac_question">
<p>Print an error if we use the log function incorrectly.</p>

</div>
<textarea data-lang="cpp" id="error_handling_errno_ac_editor" 
      data-timelimit=25000     
    data-audio=''      
    data-compileargs="[&#x27;-Wall&#x27;, &#x27;-Wextra&#x27;, &#x27;-pedantic&#x27;, &#x27;-std=c++17&#x27;]"       data-wasm=/_static
     style="visibility: hidden;">
#include <cerrno>
#include <cmath>
#include <cstring>
#include <iostream>

int main()
{
    const double value = std::log(-1.0);
    std::cout << "Log result: " << value << '\n';

    if (errno == EDOM)
    {
        std::cout << "log(-1) failed: " << std::strerror(errno) << '\n';
    }
}
</textarea>
</div>
</div>
</div>
    </div>

<p>How does errno support our error handling goals?</p>
<p>In all 4 cases, the answer is the same: <em>it’s up to you</em>.</p>
<p>You need to check <code class="docutils literal notranslate"><span class="pre">errno</span></code> to see if it has been set.
It is your resposibility to reset error if needed.
No function that sets <code class="docutils literal notranslate"><span class="pre">errno</span></code> will ever reset it to 0.
Any messages communicated are yours.
No error messages are automatically generated.
It is also your responsibility to preserve the state of your program
and cleanup resources that may be partially or improperly allocated.</p>
<p>One big advantage of <code class="docutils literal notranslate"><span class="pre">errno</span></code> is that for functions that use it, you get
a simple error code you can use to recover from an error without
the entire program aborting.</p>
<section id="handling-multiple-errors-at-once">
<span id="index-1"></span><h2><span class="section-number">3.8.1. </span>Handling multiple errors at once<a class="headerlink" href="#handling-multiple-errors-at-once" title="Permalink to this heading">¶</a></h2>
<p>Each of the previous error handling techniques are simple, but each allows us
to communicate only a single error at a time.
Sometimes we need to communicate more information.</p>
<p>We could create a data structure to store each error we care about in a <code class="docutils literal notranslate"><span class="pre">bool</span></code>.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span><span class="w"> </span><span class="nc">my_errors</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="k">constexpr</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="n">busy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<span class="w">   </span><span class="k">constexpr</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="n">cancelled</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<span class="w">   </span><span class="k">constexpr</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="n">domain_error</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<span class="w">   </span><span class="k">constexpr</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="n">invalid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
<p>However, this approach does have some limitations.
There is no easy way, for example to discover that no errors are set,
which hopefully is the normal situation for our program.
As programmers, we always want the typical uses or our data structures to be
as simple as possible.
We want the atypical ones to be simple too!</p>
<p>Can we make this easier to work with? Yes.</p>
<p>Once way is to pack all the boolean values into a single variable.</p>
<p>There are several ways to accomplish this.
Here we discuss two of them.
Both of them use a single bit to represent the true or false state.
Starting from the previous code, we change it like this:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">constexpr</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">unsigned</span><span class="w"> </span><span class="n">error_none</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="k">constexpr</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">unsigned</span><span class="w"> </span><span class="n">error_busy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="k">constexpr</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">unsigned</span><span class="w"> </span><span class="n">error_cancelled</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
<span class="k">constexpr</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">unsigned</span><span class="w"> </span><span class="n">error_domain</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="p">;</span>
<span class="k">constexpr</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">unsigned</span><span class="w"> </span><span class="n">error_invalid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">8</span><span class="p">;</span>
</pre></div>
</div>
<p>The values assigned to each of these variables is not coincidence.
Each (other than 0) represents an increase in the power of two:
<span class="math notranslate nohighlight">\(2^0, 2^1, 2^2, 2^3\)</span>.
Each of these numbers sets exactly 1 bit in an <code class="docutils literal notranslate"><span class="pre">unsigned</span> <span class="pre">int</span></code> and no others.
So now we can use these values to set the bits in the variable we want to use
to keep track of errors.</p>
<div id='bitmask' data-component="tabbedStuff"  class='alert alert-warning '><div data-component="tab" data-tabname="bitmask" >
<p>We use unsigned integers and bitwise operators to ‘flag’ each error.
This technique is called a <a class="reference external" href="https://en.wikipedia.org/wiki/Mask_(computing)">bitmask</a> and it has
a long history in programming.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Shifting bits into the sign bit of a signed integer type
is implementation defined in C++.
To avoid surprising behavior, it is a best practice to only use
unsigned integer types when manipulating bits.</p>
</div>

<div class="runestone explainer ac_section ">
<div data-component="activecode" id=error_handling_bitmask_ac data-question_label="3.8.1.1">
<div id=error_handling_bitmask_ac_question class="ac_question">
<p>Set and print some bits.</p>
<p>We can print the value stored in <code class="docutils literal notranslate"><span class="pre">errors</span></code>,
but we don’t really care about the numeric value,
we care about the individual bits in the number.</p>
<p>The <a class="reference external" href="https://en.cppreference.com/w/cpp/language/attributes/maybe_unused">maybe_unused attribute</a>
suppresses warnings about unused variables.</p>

</div>
<textarea data-lang="cpp" id="error_handling_bitmask_ac_editor" 
      data-timelimit=25000     
    data-audio=''      
    data-compileargs="[&#x27;-Wall&#x27;, &#x27;-Wextra&#x27;, &#x27;-pedantic&#x27;, &#x27;-std=c++17&#x27;]"       data-wasm=/_static
     style="visibility: hidden;">
#include <iostream>

int main()
{
   using std::cout;
   [[maybe_unused]] constexpr const unsigned error_none = 0;
   [[maybe_unused]] constexpr const unsigned error_busy = 1;
   [[maybe_unused]] constexpr const unsigned error_cancelled = 2;
   [[maybe_unused]] constexpr const unsigned error_domain = 4;
   [[maybe_unused]] constexpr const unsigned error_invalid = 8;

   unsigned errors = error_none;

   // Use bitwise OR to set a bit in the variable
   errors = errors | error_busy;
   errors = errors | error_invalid;

   // Use bitwise XOR to unset a bit
   errors = errors ^ error_busy;

   // show error value and each bit
   cout << "errors: " << errors << ", bits: (";
   for (auto err_num = error_invalid; err_num > error_none; err_num /= 2) {
       // Use bitwise AND to test if a bit has been set
       if (err_num & errors) {
           cout << 1;
       } else {
           cout << 0;
       }
   }
   cout << ")\n";
}
</textarea>
</div>
</div>
</div>
    </div>

<p>The approach using bitwise operations is simple once you know the tricks,
but C++ provides a type that provides the ability to perform the same operations:
<a class="reference external" href="https://en.cppreference.com/w/cpp/utility/std::bitset">std::bitset</a>.</p>
<div id='bitset' data-component="tabbedStuff"  class='alert alert-warning '><div data-component="tab" data-tabname="bitset" >
<p>We use the same bitwise operators for bitset that we used with unsigned integers.
But bitsets provide some additional features that can make them easier
to work with.</p>

<div class="runestone explainer ac_section ">
<div data-component="activecode" id=error_handling_bitset_ac data-question_label="3.8.1.2">
<div id=error_handling_bitset_ac_question class="ac_question">
<p>Set and print some bits in a bitset.</p>
<p>The <a class="reference external" href="https://en.cppreference.com/w/cpp/language/attributes/maybe_unused">maybe_unused attribute</a>
suppresses warnings about unused variables.</p>

</div>
<textarea data-lang="cpp" id="error_handling_bitset_ac_editor" 
      data-timelimit=25000     
    data-audio=''      
    data-compileargs="[&#x27;-Wall&#x27;, &#x27;-Wextra&#x27;, &#x27;-pedantic&#x27;, &#x27;-std=c++17&#x27;]"       data-wasm=/_static
     style="visibility: hidden;">
#include <iostream>
#include <bitset>

int main()
{
   using std::cout;
   [[maybe_unused]] constexpr const std::bitset<8> error_none = 0;
   [[maybe_unused]] constexpr const std::bitset<8> error_busy = 1;
   [[maybe_unused]] constexpr const std::bitset<8> error_cancelled = 2;
   [[maybe_unused]] constexpr const std::bitset<8> error_domain = 4;
   // we can also initialize using binary if desired
   [[maybe_unused]] constexpr const std::bitset<8> error_invalid   = {0b0000'1000};
   [[maybe_unused]] constexpr const std::bitset<8> error_length    = {0b0001'0000};
   [[maybe_unused]] constexpr const std::bitset<8> error_underflow = {0b0010'0000};
   [[maybe_unused]] constexpr const std::bitset<8> error_overflow  = {0b0100'0000};
   [[maybe_unused]] constexpr const std::bitset<8> error_range     = {0b1000'0000};

   std::bitset<8> errors = error_none;

   // Use bitwise OR to set a bit in the variable
   errors = errors | error_busy;
   errors = errors | error_invalid;

   // Use bitwise XOR to unset a bit
   errors = errors ^ error_busy;

   std::cout << "errors: " << errors << '\n';
   if ((errors & error_busy).any() != 0) {
      cout << "error busy is on\n";
   } else {
      cout << "error busy is off\n";
   }
   if (errors.test(4) == 1) {
      cout << "\nbit 4 is true" << '\n';
   }

}
</textarea>
</div>
</div>
</div>
    </div>

<hr class="docutils" />
<div class="admonition-more-to-explore admonition">
<p class="admonition-title">More to Explore</p>
<ul class="simple">
<li><p><a class="reference external" href="https://en.wikibooks.org/wiki/C_Programming/Error_handling">Wikibooks: C Error Handling</a></p></li>
<li><p>On cpp reference.com:</p>
<ul>
<li><p>The <a class="reference external" href="https://en.cppreference.com/w/cpp/error/assert">assert</a> macro</p></li>
<li><p>The <a class="reference external" href="https://en.cppreference.com/w/cpp/error/errno">errno</a> macro</p></li>
<li><p>Keyword <a class="reference external" href="https://en.cppreference.com/w/cpp/language/static_assert">static_assert</a></p></li>
</ul>
</li>
<li><p><a class="reference external" href="https://en.wikipedia.org/wiki/Mask_(computing)">bitmask</a></p></li>
<li><p>Learn C++ article <a class="reference external" href="https://www.learncpp.com/cpp-tutorial/bit-manipulation-with-bitwise-operators-and-bit-masks/">O.3 — Bit manipulation with bitwise operators and bit masks</a></p></li>
</ul>
</div>
</section>
</section>


  

  <div id="scprogresscontainer">
    You have attempted <span id="scprogresstotal"></span> of <span id="scprogressposs"></span> activities on this page <div id="subchapterprogress" aria-label="Page progress"></div>
  </div>

  <ul role="navigation" class="nextprev-list nextprev-list" aria-label="Change page">
<li id="relations-prev" class="navLink" title='Previous Section - 3.7. Keyword:  auto ' data-toggle="tooltip">
  <a href="auto.html" aria-label="Previous - 3.7. Keyword:  auto ">
    <i class='prevNav glyphicon glyphicon-chevron-left'  style="top:50%; transform:translateY(-50%)translateX(-50%); left: 50%; color:black;"></i>
  </a>
</li>

  <li id="relations-next" class="navLink" title='Next Section - 3.9. Exception handling' data-toggle="tooltip" >
    <a href="exception-handling.html" aria-label="Next - 3.9. Exception handling">
      <i id="relationsNextIcon" class='nextNav glyphicon glyphicon-chevron-right' style="top:50%; transform:translateY(-50%)translateX(-50%); left: 50%; color:black; "></i>
    </a>
  </li>
</ul>

<script>
window.addEventListener('load', (event) => {
  $('#relations-prev').tooltip({'placement': 'right', 'delay': { show: 100, hide: 50}});
  $('#relations-next').tooltip({'placement': 'left', 'delay': { show: 100, hide: 50}});
});
</script>

</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      
      | <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2017-2025 Dave Parillo.
      Created using <a href="http://runestoneinteractive.org/">Runestone</a> 6.6.2.
    </p>
  </div>
</footer>




<script>
  window.addEventListener('load', (event) => {
    runestoneComponents.getSwitch();
  });
</script>


  </body>
</html>