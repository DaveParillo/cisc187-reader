<!-- ****************************************
     |docname| - main template for this theme
     **************************************** -->
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>5.10. Lambda expressions &#8212; CISC 187 Course Reader Overview</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/basic.css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/matrixeq.css?v=58BC228F" />
    <link rel="stylesheet" type="text/css" href="../_static/CodeChat.css" />
    <link rel="stylesheet" type="text/css" href="../_static/webgldemo.css?v=B36B48D" />
    <link rel="stylesheet" type="text/css" href="../_static/webglinteractive.css?v=910DF1E1" />
    <link rel="stylesheet" type="text/css" href="../_static/accessibility.css?v=50109A2C" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../_static/637.0fa6cababf056764.css?v=F9484CEF" />
    <link rel="stylesheet" type="text/css" href="../_static/runestone.3eb60bc006ae9a54.css?v=3A5A250C" />



    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/matrixeq.js?v=D64CFA5A"></script>
    <script src="../_static/animationbase.js?v=A043C3A7"></script>
    <script src="../_static/html4css1.css?v=4533ACD3"></script>
    <script src="../_static/webglinteractive.js?v=2B768384"></script>
    <script src="../_static/FileSaver.min.js?v=8408C997"></script>
    <script src="../_static/runtime.66b619f51b746382.bundle.js?v=C3F69EE5"></script>
    <script src="../_static/637.d54be67956c5c660.bundle.js?v=915B1670"></script>
    <script src="../_static/runestone.ecc6dff5cad8b815.bundle.js?v=AE959292"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<script src="https://media.ethicalads.io/media/client/ethicalads.min.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="5.11. The std::function template" href="std_function.html" />
    <link rel="prev" title="&lt;no title&gt;" href="caesar/Makefile.html" />


<link rel="shortcut icon" href="/cisc187-reader/static/favicon.ico" type="image/ico" />



<link rel="canonical" href="https://{{canonical_host}}{{new_server_prefix}}/books/published/{{base_course}}/{{pagepath}}" />


<script>
  eBookConfig = {};
  
    eBookConfig.useRunestoneServices = false;
    eBookConfig.host = 'https://daveparillo.github.io/cisc187-reader/' || 'http://127.0.0.1:8000';
    eBookConfig.app = eBookConfig.host+'/cisc187-reader';
    eBookConfig.course = 'cisc187-reader';
    eBookConfig.basecourse = 'cisc187-reader';
    eBookConfig.isLoggedIn = false;
    eBookConfig.enableCompareMe = eBookConfig.useRunestoneServices;
    eBookConfig.new_server_prefix = '';
  
  eBookConfig.ajaxURL = eBookConfig.app+'/ajax/';
  eBookConfig.logLevel = 0;
  eBookConfig.loginRequired = false;
  eBookConfig.build_info = "unknown";
  eBookConfig.python3 = true;
  eBookConfig.acDefaultLanguage = 'cpp' ? 'cpp' : 'python'
  eBookConfig.runestone_version = '6.6.2';
  eBookConfig.jobehost = 'https://red-voice-1370.fly.dev/http://jobe2.cosc.canterbury.ac.nz';
  eBookConfig.proxyuri_runs = '/jobe/index.php/restapi/runs/';
  eBookConfig.proxyuri_files = '/jobe/index.php/restapi/files/';
  eBookConfig.enable_chatcodes = false ? false : false;
  eBookConfig.enableScratchAC = true;

</script>

<!-- Ad Serving Headers Only serve ads to Anonymous Users -->



  </head><body>


<!-- Begin navbar -->
<div id="navbar" class="navbar navbar-default navbar-fixed-top" role="navigation">

  <div class="container">

    <div class="navbar-header">
      <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
      <button type='button' class='navbar-toggle' data-toggle="collapse" data-target=".navbar-ex1-collapse" aria-label="navbar toggle">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div>
        
        
          <div class="brand-logo"><img src="../_static/img/RAIcon.png" alt=""></div>
        
        <a class="navbar-brand" href="../index.html" aria-label="index-page">
          
          cisc187-reader
        </a>
      </div>
    </div>



    <div class="navbar-collapse collapse navbar-ex1-collapse">
      <ul class="nav navbar-nav navbar-right" >

        <li class="divider-vertical"></li>

        <!-- social media dropdown -->
        <!-- end social media dropdown -->

        <li class="divider-vertical"></li>
        <!-- search dropdown -->
        <li class="dropdown">
          <a class="dropdown-toggle" href="#" data-toggle="dropdown">
            <i class="glyphicon glyphicon-search" style='opacity:0.9;'><span class="visuallyhidden" aria-label="Search">Search</span></i>
          </a>
          <ul class='dropdown-menu'>
            
                <li><a href='../index.html' aria-label="index-page">Table of Contents</a></li>
            
            <li><a href='../genindex.html'>Book Index</a></li>
            <li class="divider"></li>
            <li style="width: 240px;">
              <form class="navbar-search" style="margin:10px;" action="../search.html" method="get">
                <div class="input-group">
                  <input type="text" class="form-control" name="q" placeholder="Search this book" />
                  <span class="input-group-btn">
                    <button class="btn btn-primary" style="margin:0;" type="submit">
                      <i class="glyphicon glyphicon-search"></i>
                    </button>
                  </span>
                </div><!-- /input-group -->
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
            </li>
          </ul>
        </li>
        <!-- end search dropdown -->

        <li class="divider-vertical"></li>

        
        <li class="divider-vertical"></li>
        <!-- <li id="scratch_ac_link"><a href="javascript:ACFactory.toggleScratchActivecode()">Scratch ActiveCode</a></li> -->

        <!-- <li class="dropdown">             -->
          <li id="scratch_ac_link" class="dropdown"><a href="javascript:runestoneComponents.popupScratchAC()">
              <i class="glyphicon glyphicon-pencil" style="opacity:0.9;"><span class="visuallyhidden" aria-label="Scratch Activecode" >Scratch Activecode</span></i></a></li>
        <!-- </li> -->

        <li class="divider-vertical"></li>

        
      </ul>

      <ul class="nav navbar-nav">
        <li class="divider-vertical"></li>
        
          
          <li class="divider-vertical"></li>
        
        <!-- 
          
  <li id="relations-prev" title="Previous Chapter - &lt;no title&gt;" data-toggle="tooltip">
    <a href="caesar/Makefile.html" >
      <i class='glyphicon glyphicon-backward' style='opacity:0.9;'></i>
    </a>
  </li>
  
  <li id="relations-next" title='Next Chapter - <span class="section-number">5.11. </span>The std::function template' data-toggle="tooltip" >              
    <a href="std_function.html" >
        <i class='glyphicon glyphicon-forward' style='opacity:0.9;'></i>
    </a>
  </li>
  <li class="divider-vertical"></li>

<script>
  opts = {'placement':'bottom',
          'selector': '',
          'delay': { show: 100, hide: 50}
         };

  window.addEventListener('load', (event) => {
    $('#relations-prev').tooltip(opts);
    $('#relations-next').tooltip(opts);
  });
</script>
        -->
        
          <li></li>
        
      </ul>
      </div> <!-- navbar-collapse -->
    </div> <!-- navbar -->
  </div> <!-- container -->


<div class="container" id="continue-reading"></div>

<div class="container" id="main-content" role="main">

<!-- Ad Serving for Runestone Campaign -->


  
  <section id="lambda-expressions">
<span id="index-0"></span><h1><span class="section-number">5.10. </span>Lambda expressions<a class="headerlink" href="#lambda-expressions" title="Permalink to this heading">¶</a></h1>
<p>A <em>lambda expression</em>, or simply <em>lambda</em>,
provides a means to define an anonymous function right at the location
where it is invoked or passed as an argument to a function.</p>
<p>Often, it is more convenient to write a very short function
‘in line’ where the function is used rather than:</p>
<ol class="arabic simple">
<li><p>Write a separate function with a name</p></li>
<li><p>Store the function in a specific compilation unit</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#include</span></code> the compilation unit definitions where it will be used</p></li>
<li><p>Call or pass the function as an argument</p></li>
</ol>
<p>While using STL facilities with lambdas is not required,
it turns out that many facilities in the STL take function pointers as arguments.
This fact makes lambdas particularly useful since
any place a function pointer can be used, a lambda expression can be used instead.</p>
<p>Suppose we want to count the number of short strings in a vector.
There is a ‘count if’ function in the STL we can use to get the job done.
The <a class="reference external" href="http://en.cppreference.com/mwiki/index.php?search=std::count_if">std::count_if</a> function expects 3 parameters:</p>
<ul class="simple">
<li><p>A pointer to the first element to examine in the <code class="docutils literal notranslate"><span class="pre">vector</span></code></p></li>
<li><p>A pointer to one past the last element to examine in the <code class="docutils literal notranslate"><span class="pre">vector</span></code></p></li>
<li><p>A pointer to a function that will determine if the element should be counted</p></li>
</ul>
<p>The last parameter is commonly called a <a class="reference internal" href="../glossary.html#term-predicate-function"><span class="xref std std-term">predicate function</span></a>.
A predicate function is a fancy name for a function that returns a <code class="docutils literal notranslate"><span class="pre">bool</span></code>.</p>
<p>We could implement this using the techniques we have already learned:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">bool</span><span class="w"> </span><span class="nf">less_than_5</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">str</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">str</span><span class="p">.</span><span class="n">size</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">size_t</span><span class="w"> </span><span class="nf">num_short_strings</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;&amp;</span><span class="w"> </span><span class="n">v</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">const</span><span class="w"> </span><span class="n">string</span><span class="o">*</span><span class="w"> </span><span class="n">begin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">v</span><span class="p">.</span><span class="n">data</span><span class="p">();</span><span class="w">            </span><span class="c1">// must be const</span>
<span class="w">  </span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">end</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">begin</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">v</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">count_if</span><span class="p">(</span><span class="n">begin</span><span class="p">,</span><span class="w"> </span><span class="n">end</span><span class="p">,</span><span class="w"> </span><span class="n">less_than_5</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>While it is easy to write as many functions like this as we need:
<code class="docutils literal notranslate"><span class="pre">less_than_10</span></code>, <code class="docutils literal notranslate"><span class="pre">greater_than_15</span></code>, etc.,
it’s clear this would get tedious quickly.
Nor it is very flexible.
Each time we want to compare a different value, or use a different comparator,
we need to add a new function and recompile the program!</p>
<p>In addition,
if <code class="docutils literal notranslate"><span class="pre">less_than_5</span></code> is never used anywhere else, it seems like a bad idea to have
this special-case function elevated to the status equivalent to all other functions.
Conceptually, it doesn’t deserve
to have the status of a full-fledged function with its own name,
callable from anywhere.</p>
<p>Our goal is to avoid writing a new function for every little comparison we want to make.
One obvious solution is to add a parameter to our <code class="docutils literal notranslate"><span class="pre">less_than_5</span></code> function:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">bool</span><span class="w"> </span><span class="nf">less_than</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">str</span><span class="p">,</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="n">size</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">str</span><span class="p">.</span><span class="n">size</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">size</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Unfortunately, we can’t use this function in <a class="reference external" href="http://en.cppreference.com/mwiki/index.php?search=std::count_if">std::count_if</a>.
The new version of the function is arguably more generic,
but we can’t use our ‘improved’ <code class="docutils literal notranslate"><span class="pre">less_than</span></code> in <code class="docutils literal notranslate"><span class="pre">count_if</span></code>.
A predicate must be a <a class="reference internal" href="../glossary.html#term-unary-function"><span class="xref std std-term">unary function</span></a>.
In other words, it can take only 1 parameter, no more.
The ‘improved’ function is less useful than the old,
even though we made it ‘generic’.
We need a way to pass more than one parameter
to a function that can only take 1 parameter.</p>
<p>Starting in C++11, a new language feature was added just for this kind of problem:
lambda expressions.
Depending on where you go, you’ll also see these referred to as
closures, lambda functions, function literals, or just lambdas.</p>
<p>A lambda allows us to omit the separate function definition entirely and use it
within the <code class="docutils literal notranslate"><span class="pre">num_short_strings</span></code> function as an inline parameter to <code class="docutils literal notranslate"><span class="pre">count_if</span></code>:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="kt">size_t</span><span class="w"> </span><span class="nf">num_short_strings</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;&amp;</span><span class="w"> </span><span class="n">v</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">2</span><span class="w">  </span><span class="k">const</span><span class="w"> </span><span class="n">string</span><span class="o">*</span><span class="w"> </span><span class="n">begin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">v</span><span class="p">.</span><span class="n">data</span><span class="p">();</span>
<span class="linenos">3</span><span class="w">  </span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">end</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">begin</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">v</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
<span class="linenos">4</span>
<span class="linenos">5</span><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">count_if</span><span class="p">(</span><span class="n">begin</span><span class="p">,</span><span class="w"> </span><span class="n">end</span><span class="p">,</span>
<span class="hll"><span class="linenos">6</span><span class="w">                  </span><span class="p">[](</span><span class="n">string</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="n">x</span><span class="p">.</span><span class="n">size</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">5</span><span class="p">);</span><span class="w"> </span><span class="p">});</span>
</span><span class="linenos">7</span><span class="p">}</span>
</pre></div>
</div>
<p>The lambda on line 6 completely replaces the old function <code class="docutils literal notranslate"><span class="pre">less_than_5</span></code>.</p>
<p>The general syntax for a lambda is:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>[ captures ] (parameters) -&gt; returnType { lambda_body; }
</pre></div>
</div>
<p>The capture block <code class="docutils literal notranslate"><span class="pre">[]</span></code> is required, even if empty.
This informs the compiler that a lambda expression is beginning.</p>
<p>The capture block allows the lambda to <strong>capture</strong> variables from outside the scope
of the lambda body and use them within the lambda.
Without a capture, no variables outside the lambda scope are visible
within the lambda.</p>
<p>In our previous example, it would allow us to extend num_short_strings by
being able to pass in a value, rather than hard code the value <code class="docutils literal notranslate"><span class="pre">5</span></code>:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">size_t</span><span class="w"> </span><span class="nf">num_short_strings</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;&amp;</span><span class="w"> </span><span class="n">v</span><span class="p">,</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="n">sz</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">const</span><span class="w"> </span><span class="n">string</span><span class="o">*</span><span class="w"> </span><span class="n">begin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">v</span><span class="p">.</span><span class="n">data</span><span class="p">();</span>
<span class="w">  </span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">end</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">begin</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">v</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">count_if</span><span class="p">(</span><span class="n">begin</span><span class="p">,</span><span class="w"> </span><span class="n">end</span><span class="p">,</span>
<span class="w">                  </span><span class="p">[</span><span class="o">&amp;</span><span class="n">sz</span><span class="p">](</span><span class="n">string</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="n">x</span><span class="p">.</span><span class="n">size</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">sz</span><span class="p">);</span><span class="w"> </span><span class="p">});</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The parameter is optional, but many useful standard algorithms that operate
on containers expect to be able to pass each container element one at a time
to a function that will use it.
This is exactly what <code class="docutils literal notranslate"><span class="pre">count_if</span></code> does.</p>
<p>The return type is also optional.
A lambda will ordinarily be able to deduce the correct type from the return
statement, so an explicit return is not needed.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;algorithm&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;iostream&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;string&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;vector&gt;</span>

<span class="k">using</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">;</span>
<span class="k">using</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="p">;</span>

<span class="c1">// Show the number of strings in the vector whose length</span>
<span class="c1">// is between min and max.</span>
<span class="c1">//</span>
<span class="c1">// perhaps a better name for this function is &#39;show_lengths_between&#39;</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">show_lengths</span><span class="w"> </span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;&amp;</span><span class="w"> </span><span class="n">v</span><span class="p">,</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="n">min</span><span class="p">,</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="n">max</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">const</span><span class="w"> </span><span class="n">string</span><span class="o">*</span><span class="w"> </span><span class="n">begin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">v</span><span class="p">.</span><span class="n">data</span><span class="p">();</span>
<span class="w">  </span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">end</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">begin</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">v</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>

<span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Number of names of length </span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>
<span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="kt">size_t</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">min</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">max</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;: </span><span class="se">\t</span><span class="s">&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">count_if</span><span class="p">(</span><span class="n">begin</span><span class="p">,</span><span class="w"> </span><span class="n">end</span><span class="p">,</span>
<span class="w">               </span><span class="p">[</span><span class="o">&amp;</span><span class="n">i</span><span class="p">](</span><span class="n">string</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="n">x</span><span class="p">.</span><span class="n">size</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">i</span><span class="p">);</span><span class="w"> </span><span class="p">});</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="sc">&#39;\n&#39;</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>

<span class="p">}</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span><span class="w"> </span><span class="n">names</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="s">&quot;alice&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;bob&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;clarissa&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;dario&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;elizabeth&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s">&quot;abbi&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;barnabas&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;clarabelle&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;daniel&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ethan&quot;</span>
<span class="w">    </span><span class="s">&quot;farouk&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;gabby&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;hanh phuc&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;lakshay&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s">&quot;fabrice&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;gail&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;habeeb&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;jabir&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;liza&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s">&quot;muhammad&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;nora&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;oscar&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;pauline&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;roberto&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s">&quot;scarlett&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;thomas&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ubelia&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;victorio&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s">&quot;wahkisha&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;xan&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;yacov&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;zabrina&quot;</span>
<span class="w">  </span><span class="p">};</span>

<span class="w">  </span><span class="n">show_lengths</span><span class="w"> </span><span class="p">(</span><span class="n">names</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">13</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition-try-this admonition">
<p class="admonition-title">Try this!</p>
<p>Rewrite the rot13/rot47 program to use lambdas to perform the rotation instead of traditional function calls</p>
</div>
<section id="assigning-a-lambda-to-a-variable">
<h2><span class="section-number">5.10.1. </span>Assigning a lambda to a variable<a class="headerlink" href="#assigning-a-lambda-to-a-variable" title="Permalink to this heading">¶</a></h2>
<p>A lambda does not always need to be defined within another function or
within a function parameter list.
You can define a lambda any place a normal function can be defined,
but if you do this, you must assign the lambda to a variable so that it has a name:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;iostream&gt;</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">auto</span><span class="w"> </span><span class="n">lambda</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[]</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Hello, lambda!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>
<span class="w">  </span><span class="p">};</span>
<span class="w">  </span><span class="n">lambda</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Once a lambda has a name, it is called like a function,
using <code class="docutils literal notranslate"><span class="pre">operator()</span></code>.
The previous example was about as simple as a lambda can get.
No return type and no parameter.</p>
<p>Note the use of <code class="docutils literal notranslate"><span class="pre">auto</span></code> when defining the type of a lambda.
In the case of a lambda, auto is not an option.
If auto was not used, what type would we supply in its place?</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="linenos"> 2</span><span class="w">  </span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">numbers</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w"> </span><span class="mi">25</span><span class="p">,</span>
<span class="linenos"> 3</span><span class="w">                       </span><span class="mi">35</span><span class="p">,</span><span class="w"> </span><span class="mi">45</span><span class="p">,</span><span class="w"> </span><span class="mi">50</span><span class="w"> </span><span class="p">};</span>
<span class="linenos"> 4</span><span class="w">  </span><span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="o">*</span><span class="w"> </span><span class="n">begin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">numbers</span><span class="p">.</span><span class="n">data</span><span class="p">();</span>
<span class="linenos"> 5</span><span class="w">  </span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">end</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">begin</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">numbers</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
<span class="linenos"> 6</span>
<span class="hll"><span class="linenos"> 7</span><span class="w">  </span><span class="k">auto</span><span class="w"> </span><span class="n">gt_5</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">count_if</span><span class="p">(</span><span class="n">begin</span><span class="p">,</span><span class="w"> </span><span class="n">end</span><span class="p">,</span>
</span><span class="hll"><span class="linenos"> 8</span><span class="w">                </span><span class="p">[](</span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">5</span><span class="p">);</span><span class="w"> </span><span class="p">});</span>
</span><span class="linenos"> 9</span>
<span class="linenos">10</span><span class="w">  </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;The # of elements &gt; 5 is: &quot;</span>
<span class="hll"><span class="linenos">11</span><span class="w">       </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">gt_5</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>
</span><span class="linenos">12</span><span class="p">}</span>
</pre></div>
</div>
<p>Actually, there is no way to know.
Each lambda defines a new type.
Only the compiler knows exactly what the type is, so as a programmer,
you must use auto and allow the compiler to deduce it.</p>
<p>Even two identical lambdas will become two different types when compiled.</p>
<p>It is possible to convert between lambda expressions and function pointers,
as this video demonstrates:</p>

    <div class="runestone " style="margin-left: auto; margin-right:auto">
        <div id="Cmk0Tlo1eCA" data-component="youtube" class="align-center youtube-video"
            data-video-height="281" data-question_label="5.10.1.1"
            data-video-width="500" data-video-videoid="Cmk0Tlo1eCA"
            data-video-divid="Cmk0Tlo1eCA" data-video-start="0"
            data-video-end="-1" ></div>
    </div>
    </section>
<section id="trailing-return-types-in-lambda-expressions">
<span id="index-2"></span><h2><span class="section-number">5.10.2. </span>Trailing return types in lambda expressions<a class="headerlink" href="#trailing-return-types-in-lambda-expressions" title="Permalink to this heading">¶</a></h2>
<p>When the compiler cannot deduce the correct type,
or does not deduce the desired type,
then the return type must be specified.</p>
<p>Since the capture clause must be first,
we have a problem: where to specify the return type.
It can’t come before the capture clause,
which is where return types are defined for normal functions.</p>
<p>In a lambda, the only option is to specify a <a class="reference internal" href="../glossary.html#term-trailing-return-type"><span class="xref std std-term">trailing return type</span></a>.
It can be used with ordinary functions also, but
they are most commonly seen in lambda expressions and function templates.</p>
<p>A trailing return type is <code class="docutils literal notranslate"><span class="pre">operator-&gt;</span></code>, followed by the return type.
The trailing return type must occur after the parameter list
and before the function body.
This is true for both lambdas and normal functions.</p>
<p>In the following function, we want to return a type
other than what would normally be returned by the operations.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;The return value of this odd function is: &quot;</span>
<span class="w">          </span><span class="p">[](</span><span class="kt">double</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">y</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">5</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="k">return</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">y</span><span class="p">;</span>
<span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">y</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="k">return</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">y</span><span class="p">;</span>
<span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="k">return</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">y</span><span class="p">;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">          </span><span class="p">}</span><span class="w"> </span><span class="p">(</span><span class="mf">3.14159</span><span class="p">,</span><span class="w"> </span><span class="mf">2.71828</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Note in the previous example we defined a lambda taking two parameters and then
immediately called it using <code class="docutils literal notranslate"><span class="pre">operator()</span></code>.</p>
<hr class="docutils" />
<div class="admonition-more-to-explore admonition">
<p class="admonition-title">More to Explore</p>
<ul class="simple">
<li><p>From: cppreference.com:</p>
<ul>
<li><p>C++ <a class="reference external" href="http://en.cppreference.com/w/cpp/language/lambda">lambda expressions</a> .</p></li>
<li><p><a class="reference external" href="http://en.cppreference.com/w/cpp/algorithm/count">std::count and std::count_if</a>.</p></li>
</ul>
</li>
<li><p><cite>Descriptions of lambda expressions</cite> &lt;<a class="reference external" href="https://msdn.microsoft.com/en-us/library/dd293608.aspx">https://msdn.microsoft.com/en-us/library/dd293608.aspx</a>&gt;`_ from Microsoft’s MSDN</p></li>
</ul>
</div>
</section>
</section>


  

  <div id="scprogresscontainer">
    You have attempted <span id="scprogresstotal"></span> of <span id="scprogressposs"></span> activities on this page <div id="subchapterprogress" aria-label="Page progress"></div>
  </div>

  <ul role="navigation" class="nextprev-list nextprev-list" aria-label="Change page">
<li id="relations-prev" class="navLink" title='Previous Section - &lt;no title&gt;' data-toggle="tooltip">
  <a href="caesar/Makefile.html" aria-label="Previous - &lt;no title&gt;">
    <i class='prevNav glyphicon glyphicon-chevron-left'  style="top:50%; transform:translateY(-50%)translateX(-50%); left: 50%; color:black;"></i>
  </a>
</li>

  <li id="relations-next" class="navLink" title='Next Section - 5.11. The std::function template' data-toggle="tooltip" >
    <a href="std_function.html" aria-label="Next - 5.11. The std::function template">
      <i id="relationsNextIcon" class='nextNav glyphicon glyphicon-chevron-right' style="top:50%; transform:translateY(-50%)translateX(-50%); left: 50%; color:black; "></i>
    </a>
  </li>
</ul>

<script>
window.addEventListener('load', (event) => {
  $('#relations-prev').tooltip({'placement': 'right', 'delay': { show: 100, hide: 50}});
  $('#relations-next').tooltip({'placement': 'left', 'delay': { show: 100, hide: 50}});
});
</script>

</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      
      | <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2017-2023 Dave Parillo.
      Created using <a href="http://runestoneinteractive.org/">Runestone</a> 6.6.2.
    </p>
  </div>
</footer>




<script>
  window.addEventListener('load', (event) => {
    runestoneComponents.getSwitch();
  });
</script>


  </body>
</html>