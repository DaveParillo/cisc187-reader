<!-- ****************************************
     |docname| - main template for this theme
     **************************************** -->
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>12.3. The queue class &#8212; CISC 187 Course Reader Overview</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/basic.css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/matrixeq.css?v=58BC228F" />
    <link rel="stylesheet" type="text/css" href="../_static/CodeChat.css" />
    <link rel="stylesheet" type="text/css" href="../_static/webgldemo.css?v=B36B48D" />
    <link rel="stylesheet" type="text/css" href="../_static/webglinteractive.css?v=910DF1E1" />
    <link rel="stylesheet" type="text/css" href="../_static/accessibility.css?v=50109A2C" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../_static/637.fafafbd97df8a0d1.css?v=B5361BC8" />
    <link rel="stylesheet" type="text/css" href="../_static/runestone.e4d5592da655219f.css?v=32648AE5" />



    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/matrixeq.js?v=D64CFA5A"></script>
    <script src="../_static/animationbase.js?v=A043C3A7"></script>
    <script src="../_static/html4css1.css?v=4533ACD3"></script>
    <script src="../_static/webglinteractive.js?v=2B768384"></script>
    <script src="../_static/FileSaver.min.js?v=8408C997"></script>
    <script src="../_static/runtime.b0f8547c48f16a9f.bundle.js?v=2731F567"></script>
    <script src="../_static/637.d54be67956c5c660.bundle.js?v=915B1670"></script>
    <script src="../_static/runestone.0e9550fe42760516.bundle.js?v=71AD37BA"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="12.4. The deque class" href="deque.html" />
    <link rel="prev" title="12.2. The stack class" href="stack.html" />


<link rel="shortcut icon" href="/cisc187-reader/static/favicon.ico" type="image/ico" />


<script>
  eBookConfig = {};
  
    eBookConfig.useRunestoneServices = false;
    eBookConfig.host = 'https://daveparillo.github.io/cisc187-reader/' || 'http://127.0.0.1:8000';
    eBookConfig.app = eBookConfig.host+'/cisc187-reader';
    eBookConfig.course = 'cisc187-reader';
    eBookConfig.basecourse = 'cisc187-reader';
    eBookConfig.isLoggedIn = false;
    eBookConfig.enableCompareMe = eBookConfig.useRunestoneServices;
    eBookConfig.new_server_prefix = '';
  
  eBookConfig.ajaxURL = eBookConfig.app+'/ajax/';
  eBookConfig.logLevel = 0;
  eBookConfig.loginRequired = false;
  eBookConfig.build_info = "unknown";
  eBookConfig.python3 = true;
  eBookConfig.acDefaultLanguage = 'cpp' ? 'cpp' : 'python'
  eBookConfig.runestone_version = '6.2.1';
  eBookConfig.jobehost = 'https://red-voice-1370.fly.dev/http://jobe2.cosc.canterbury.ac.nz';
  eBookConfig.proxyuri_runs = '/jobe/index.php/restapi/runs/';
  eBookConfig.proxyuri_files = '/jobe/index.php/restapi/files/';
  eBookConfig.enable_chatcodes = false ? false : false;
  eBookConfig.enableScratchAC = true;

</script>

<!-- Ad Serving Headers Only serve ads to Anonymous Users -->



  </head><body>


<!-- Begin navbar -->
<div id="navbar" class="navbar navbar-default navbar-fixed-top" role="navigation">

  <div class="container">

    <div class="navbar-header">
      <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
      <button type='button' class='navbar-toggle' data-toggle="collapse" data-target=".navbar-ex1-collapse" aria-label="navbar toggle">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div>
        
        
          <div class="brand-logo"><img src="../_static/img/RAIcon.png" alt=""></div>
        
        <a class="navbar-brand" href="../index.html" aria-label="index-page">
          
          cisc187-reader
        </a>
      </div>
    </div>



    <div class="navbar-collapse collapse navbar-ex1-collapse">
      <ul class="nav navbar-nav navbar-right" >

        <li class="divider-vertical"></li>
        <li><span id="browsing_warning"></span></li>

        <!-- social media dropdown -->
        <!-- end social media dropdown -->

        <li class="divider-vertical"></li>
        <!-- search dropdown -->
        <li class="dropdown">
          <a class="dropdown-toggle" href="#" data-toggle="dropdown">
            <i class="glyphicon glyphicon-search" style='opacity:0.9;'><span class="visuallyhidden" aria-label="Search">Search</span></i>
          </a>
          <ul class='dropdown-menu'>
            
                <li><a href='../index.html' aria-label="index-page">Table of Contents</a></li>
            
            <li><a href='../genindex.html'>Book Index</a></li>
            <li class="divider"></li>
            <li style="width: 240px;">
              <form class="navbar-search" style="margin:10px;" action="../search.html" method="get">
                <div class="input-group">
                  <input type="text" class="form-control" name="q" placeholder="Search this book" />
                  <span class="input-group-btn">
                    <button class="btn btn-primary" style="margin:0;" type="submit">
                      <i class="glyphicon glyphicon-search"></i>
                    </button>
                  </span>
                </div><!-- /input-group -->
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
            </li>
          </ul>
        </li>
        <!-- end search dropdown -->

        <li class="divider-vertical"></li>

        
        <li class="divider-vertical"></li>
        <!-- <li id="scratch_ac_link"><a href="javascript:ACFactory.toggleScratchActivecode()">Scratch ActiveCode</a></li> -->

        <!-- <li class="dropdown">             -->
          <li id="scratch_ac_link" class="dropdown"><a href="javascript:runestoneComponents.popupScratchAC()">
              <i class="glyphicon glyphicon-pencil" style="opacity:0.9;"><span class="visuallyhidden" aria-label="Scratch Activecode" >Scratch Activecode</span></i></a></li>
        <!-- </li> -->

        <li class="divider-vertical"></li>

        
      </ul>

      <ul class="nav navbar-nav">
        <li class="divider-vertical"></li>
        
          
          <li class="divider-vertical"></li>
        
        <!-- 
          
  <li id="relations-prev" title="Previous Chapter - <span class="section-number">12.2. </span>The stack class" data-toggle="tooltip">
    <a href="stack.html" >
      <i class='glyphicon glyphicon-backward' style='opacity:0.9;'></i>
    </a>
  </li>
  
  <li id="relations-next" title='Next Chapter - <span class="section-number">12.4. </span>The deque class' data-toggle="tooltip" >              
    <a href="deque.html" >
        <i class='glyphicon glyphicon-forward' style='opacity:0.9;'></i>
    </a>
  </li>
  <li class="divider-vertical"></li>

<script>
  opts = {'placement':'bottom',
          'selector': '',
          'delay': { show: 100, hide: 50}
         };

  window.addEventListener('load', (event) => {
    $('#relations-prev').tooltip(opts);
    $('#relations-next').tooltip(opts);
  });
</script>
        -->
        
          <li></li>
        
      </ul>
      </div> <!-- navbar-collapse -->
    </div> <!-- navbar -->
  </div> <!-- container -->


<div class="container" id="continue-reading"></div>

<div class="container" id="main-content" role="main">

<!-- Ad Serving for Runestone Campaign -->


  
  <section id="the-queue-class">
<span id="index-0"></span><h1><span class="section-number">12.3. </span>The queue class<a class="headerlink" href="#the-queue-class" title="Permalink to this headline">¶</a></h1>
<p>A <a class="reference external" href="https://en.cppreference.com/w/cpp/container/queue">queue</a> is another special purpose container adapter
that limits random element access to all parts of the storage.
A <em>queue</em> is just another word for a line.
Like a stack, a queue restricts element access to the ends.
<em>Unlike</em> a stack, a queue allows access to both ends:</p>
<ul class="simple">
<li><p>New elements can only be added to the “back” of the line</p></li>
<li><p>Elements can only be retrieved from the “front” of the line.</p></li>
</ul>
<p>Imagine a line at the bank or a store.
An orderly queue means that the people who get in line first
are the first customers called.
This is the guarantee <a class="reference external" href="https://en.cppreference.com/w/cpp/container/queue">queue</a> enforces.
A queue is a FIFO (first-in, first-out) data structure.</p>
<p>The <a class="reference external" href="https://en.cppreference.com/w/cpp/container/queue">std::queue</a> is a container adapter that gives the programmer the
functionality of a queue.</p>
<p>The class template acts as a wrapper to the underlying container - only
a specific set of functions is provided.
The queue pushes elements on the back of the underlying container,
and pops them from the front.</p>
<div align="center" class="align-center"><div class="graphviz"><img src="../_images/graphviz-25a2eb1c3fa5471ccd948060946b85ad163b71a8.png" alt="std::queue elements" class="graphviz" /></div>
</div>
<p id="index-1">The defining operations of a <a class="reference external" href="https://en.cppreference.com/w/cpp/container/queue">queue</a> are:</p>
<dl class="simple">
<dt>push</dt><dd><p>Add a new element to the back (end) of the queue.</p>
</dd>
<dt>pop</dt><dd><p>Remove an element from the front (beginning) of the queue.</p>
</dd>
<dt>front</dt><dd><p>Get the value of the element at the beginning of the queue.</p>
</dd>
<dt>back</dt><dd><p>Get the value of the element at the end of the queue.</p>
</dd>
</dl>
<div align="center" class="align-center"><div class="graphviz"><img src="../_images/graphviz-b2dd8a8b97a1c48ded2fb1af50ea8f8dc9bcdcc2.png" alt="std::queue operations" class="graphviz" /></div>
</div>
<p>Minor modifications change <code class="docutils literal notranslate"><span class="pre">pop_all()</span></code> from a function
performing <code class="docutils literal notranslate"><span class="pre">stack</span></code> operations into one
performing <code class="docutils literal notranslate"><span class="pre">queue</span></code> operations:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;queue&gt;</span><span class="cp"></span>

<span class="cp">#define QueueContainer typename</span>

<span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="n">QueueContainer</span><span class="w"> </span><span class="n">C</span><span class="o">&gt;</span><span class="w"></span>
<span class="kt">void</span><span class="w"> </span><span class="n">pop_all</span><span class="p">(</span><span class="n">C</span><span class="o">&amp;</span><span class="w"> </span><span class="n">q</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">while</span><span class="p">(</span><span class="o">!</span><span class="n">q</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">q</span><span class="p">.</span><span class="n">front</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot; &quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">q</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;</span><span class="se">\n</span><span class="s">popped all from queue</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>The STL containers <code class="docutils literal notranslate"><span class="pre">std::list</span></code> and <code class="docutils literal notranslate"><span class="pre">std::deque</span></code> can be adapted to create a queue.</p>
<section id="circular-queues">
<h2><span class="section-number">12.3.1. </span>Circular queues<a class="headerlink" href="#circular-queues" title="Permalink to this headline">¶</a></h2>
<p>A <span class="target" id="index-2"></span>circular queue, <span class="target" id="index-3"></span>cyclic buffer, or <span class="target" id="index-4"></span>ring buffer
is a data structure that uses a single,
fixed-size buffer as if it were connected end-to-end.
A ring buffer is a good choice when you need the
behavior of a queue and the buffer size can be fixed.</p>
<p>There are many ways to implement this data structure and the following
is just an example of one.</p>
<div id='ring_concept_tab' data-component="tabbedStuff"  class='alert alert-warning '><div data-component="tab" data-tabname="Empty" >
<p>Conceptually, a circular buffer is a closed ring of data.</p>
<ul class="simple">
<li><p>One element needs to be chosen as the start of the data.
The terms <code class="docutils literal notranslate"><span class="pre">start</span></code>, <code class="docutils literal notranslate"><span class="pre">begin</span></code>, or <code class="docutils literal notranslate"><span class="pre">head</span></code> are all reasonable.</p></li>
<li><p>One element needs to be chosen as the end of the data.
The terms <code class="docutils literal notranslate"><span class="pre">last</span></code>, <code class="docutils literal notranslate"><span class="pre">end</span></code>, or <code class="docutils literal notranslate"><span class="pre">tail</span></code> are all reasonable.</p></li>
</ul>
<p>The start locations of <code class="docutils literal notranslate"><span class="pre">head</span></code> and <code class="docutils literal notranslate"><span class="pre">tail</span></code> are arbitrary.</p>
<p>A ring buffer is initially empty and of some predefined length.
For example, this is an 8-element buffer conceptually:</p>
<div align="center" class="align-center"><div class="graphviz"><img src="../_images/graphviz-656a766b07b33e4c07c89410bfe746057062786c.png" alt="empty buffer" class="graphviz" /></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">tail</span></code> node always refers to the element just past the end
of our data (as always).
So when the head and tail are equal, the buffer is empty.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">capacity</span></code> is the maximum number of elements that can be
stored in the buffer.
In this example, the capcacity is <code class="docutils literal notranslate"><span class="pre">8</span></code>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">size</span></code> is the current number of elements used in the buffer.
In our initially empty buffer, the size is <code class="docutils literal notranslate"><span class="pre">0</span></code>.</p>
<p>Since there are no true circular sections of memory, it is normal to
represent a circular buffer in a normal contiguous linear memory block.
An array is a good choice.</p>
<div align="center" class="align-center"><div class="graphviz"><img src="../_images/graphviz-0988062c7544109e0facebc7ee0cb6a8a1ba2904.png" alt="empty buffer - linear representation" class="graphviz" /></div>
</div>
</div><div data-component="tab" data-tabname="Add" >
<p>Adding one element to the buffer involves storing a new value
at the tail location and moving the tail.</p>
<div align="center" class="align-center"><div class="graphviz"><img src="../_images/graphviz-05789836c6eb2849e35b57d8f7b1f580d5441ac6.png" alt="add one to buffer" class="graphviz" /></div>
</div>
<p>And in the array:</p>
<div align="center" class="align-center"><div class="graphviz"><img src="../_images/graphviz-62cd71a8a80ad00e06ab0f9b2c904ca8474ee60b.png" alt="add one - linear representation" class="graphviz" /></div>
</div>
<p>The buffer size is now <code class="docutils literal notranslate"><span class="pre">1</span></code>.</p>
<p>If two more items are added, the tail moves accordingly.
The head does not move as items are added.</p>
<div align="center" class="align-center"><div class="graphviz"><img src="../_images/graphviz-1e010a76d8c5d4faa9692c7e445d7c3f4eb3f1d5.png" alt="add two more to buffer" class="graphviz" /></div>
</div>
<p>The buffer size is now <code class="docutils literal notranslate"><span class="pre">3</span></code>.</p>
</div><div data-component="tab" data-tabname="Remove" >
<p>Removing an element from the buffer involves</p>
<ul class="simple">
<li><p>returning the oldest element from the buffer</p></li>
<li><p>moving the head</p></li>
<li><p>decrease buffer size</p></li>
</ul>
<p>As with earlier containers, there is no need to erase the oldest
element, since after the head has moved, we can no longer access it.</p>
<div align="center" class="align-center"><div class="graphviz"><img src="../_images/graphviz-0d4fea21eb93f98b7b06663db73338116d07b260.png" alt="remove 1 element" class="graphviz" /></div>
</div>
<p>The buffer size is now <code class="docutils literal notranslate"><span class="pre">2</span></code>.</p>
</div><div data-component="tab" data-tabname="Full Buffer" >
<p>Starting with our buffer containing [B,C], we can add elements until it
is completely full.</p>
<p>Recall we popped <code class="docutils literal notranslate"><span class="pre">A</span></code> from this buffer earlier.</p>
<p>Adding a few elements moves the tail and increases the size.</p>
<div align="center" class="align-center"><div class="graphviz"><img src="../_images/graphviz-b20c7b5c7e573e54c3649855a1e37aa65c13b6a0.png" alt="adding more to buffer" class="graphviz" /></div>
</div>
<p>At this point the buffer is almost full.
The tail now refers to the first element in the array.
It needed to wrap around to avoid potentially allowing a write outside
the array bounds.
The slot containing ‘A’ is available for writing, since it was removed earlier.</p>
<div align="center" class="align-center"><div class="graphviz"><img src="../_images/graphviz-7960e3a355cb6d61b466dc674c07ab946747f1b0.png" alt="almost full buffer" class="graphviz" /></div>
</div>
<p>One more write to the element at position 0 and
now the buffer is completely full.</p>
<div align="center" class="align-center"><div class="graphviz"><img src="../_images/graphviz-41e61814e5f5d884122e8ac459882804df717155.png" alt="full buffer" class="graphviz" /></div>
</div>
<p>The buffer size is now <code class="docutils literal notranslate"><span class="pre">8</span></code>.
It is important to note that in this implementation
<code class="docutils literal notranslate"><span class="pre">head</span> <span class="pre">==</span> <span class="pre">tail</span></code> does not represent the idea of an empty buffer.
In this implementation the <code class="docutils literal notranslate"><span class="pre">head</span> <span class="pre">==</span> <span class="pre">tail</span></code> state can mean either
a completely empty or a full queue.</p>
<p>An extra variable <code class="docutils literal notranslate"><span class="pre">size</span></code> is used to distinguish empty from full,
since we know the array size
ahead of time.
If we chose to not keep track of size and use only the head and tail
then the maximum size of the would be <span class="math notranslate nohighlight">\(capacity - 1\)</span>.</p>
<p>Different designs could result in different outcomes, there are no
hard and fast rules here.
I chose this implementation because it is easy to reason about and
does not waste a storage slot, at the cost of an additional variable.</p>
<p>What do we do when our buffer is full?
At this point, we have choices:</p>
<ul>
<li><p>Allow no writes to the buffer until elements are removed.</p>
<p>This is common when it is important to never lose any information,
such as when processing keystrokes from the user, or managing a
print queue.</p>
</li>
<li><p>Allow writes to overwrite the oldest elements.
The oldest values are lost in favor of new values.</p>
<p>This implementation is used when the oldest information may
no longer be important enough by the time the buffer is full.</p>
</li>
</ul>
</div>
    </div>

<hr class="docutils" />
<div class="admonition-more-to-explore admonition">
<p class="admonition-title">More to Explore</p>
<ul class="simple">
<li><p><a class="reference external" href="http://en.cppreference.com/w/cpp/container">STL containers library</a></p></li>
<li><p>STL <a class="reference external" href="https://en.cppreference.com/w/cpp/container/queue">queue</a> class</p></li>
<li><p><a class="reference external" href="http://www.mycodeschool.com">MyCodeSchool</a> video:
<a class="reference external" href="https://www.youtube.com/watch?v=XuCbpw6Bj1U&amp;list=PL2_aWCzGMAwI3W_JlcBbtYTwiQSsOTa6P&amp;index=22">Data structures: introduction to queue</a></p></li>
<li><p><a class="reference external" href="https://en.wikipedia.org/wiki/Circular_buffer">Circular buffer</a> on wikipedia</p></li>
</ul>
</div>
</section>
</section>


  <div id="scprogresscontainer">
    You have attempted <span id="scprogresstotal"></span> of <span id="scprogressposs"></span> activities on this page <div id="subchapterprogress" aria-label="Page progress"></div>
  </div>

  <ul role="navigation" class="nextprev-list nextprev-list" aria-label="Change page">
<li id="relations-prev" class="navLink" title='Previous Section - 12.2. The stack class' data-toggle="tooltip">
  <a href="stack.html" aria-label="Previous - 12.2. The stack class">
    <i class='prevNav glyphicon glyphicon-chevron-left'  style="top:50%; transform:translateY(-50%)translateX(-50%); left: 50%; color:black;"></i>
  </a>
</li>

  <li id="relations-next" class="navLink" title='Next Section - 12.4. The deque class' data-toggle="tooltip" >
    <a href="deque.html" aria-label="Next - 12.4. The deque class">
      <i id="relationsNextIcon" class='nextNav glyphicon glyphicon-chevron-right' style="top:50%; transform:translateY(-50%)translateX(-50%); left: 50%; color:black; "></i>
    </a>
  </li>
</ul>

<script>
window.addEventListener('load', (event) => {
  $('#relations-prev').tooltip({'placement': 'right', 'delay': { show: 100, hide: 50}});
  $('#relations-next').tooltip({'placement': 'left', 'delay': { show: 100, hide: 50}});
});
</script>

</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      
      | <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2017-2022 Dave Parillo.
      Created using <a href="http://runestoneinteractive.org/">Runestone</a> 6.2.1.
    </p>
  </div>
</footer>




<script>
  window.addEventListener('load', (event) => {
    runestoneComponents.getSwitch();
  });
</script>


  </body>
</html>