<!-- ****************************************
     |docname| - main template for this theme
     **************************************** -->
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>12.2. The stack class &#8212; CISC 187 Course Reader Overview</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/basic.css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/matrixeq.css?v=58BC228F" />
    <link rel="stylesheet" type="text/css" href="../_static/CodeChat.css" />
    <link rel="stylesheet" type="text/css" href="../_static/webgldemo.css?v=B36B48D" />
    <link rel="stylesheet" type="text/css" href="../_static/webglinteractive.css?v=910DF1E1" />
    <link rel="stylesheet" type="text/css" href="../_static/accessibility.css?v=50109A2C" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../_static/637.0fa6cababf056764.css?v=F9484CEF" />
    <link rel="stylesheet" type="text/css" href="../_static/runestone.3eb60bc006ae9a54.css?v=3A5A250C" />



    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/matrixeq.js?v=D64CFA5A"></script>
    <script src="../_static/animationbase.js?v=A043C3A7"></script>
    <script src="../_static/html4css1.css?v=4533ACD3"></script>
    <script src="../_static/webglinteractive.js?v=2B768384"></script>
    <script src="../_static/FileSaver.min.js?v=8408C997"></script>
    <script src="../_static/runtime.66b619f51b746382.bundle.js?v=C3F69EE5"></script>
    <script src="../_static/637.d54be67956c5c660.bundle.js?v=915B1670"></script>
    <script src="../_static/runestone.ecc6dff5cad8b815.bundle.js?v=AE959292"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<script src="https://media.ethicalads.io/media/client/ethicalads.min.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="12.3. The queue class" href="queue.html" />
    <link rel="prev" title="12.1. The Adapter pattern" href="adapter.html" />


<link rel="shortcut icon" href="/cisc187-reader/static/favicon.ico" type="image/ico" />



<link rel="canonical" href="https://{{canonical_host}}{{new_server_prefix}}/books/published/{{base_course}}/{{pagepath}}" />


<script>
  eBookConfig = {};
  
    eBookConfig.useRunestoneServices = false;
    eBookConfig.host = 'https://daveparillo.github.io/cisc187-reader/' || 'http://127.0.0.1:8000';
    eBookConfig.app = eBookConfig.host+'/cisc187-reader';
    eBookConfig.course = 'cisc187-reader';
    eBookConfig.basecourse = 'cisc187-reader';
    eBookConfig.isLoggedIn = false;
    eBookConfig.enableCompareMe = eBookConfig.useRunestoneServices;
    eBookConfig.new_server_prefix = '';
  
  eBookConfig.ajaxURL = eBookConfig.app+'/ajax/';
  eBookConfig.logLevel = 0;
  eBookConfig.loginRequired = false;
  eBookConfig.build_info = "unknown";
  eBookConfig.python3 = true;
  eBookConfig.acDefaultLanguage = 'cpp' ? 'cpp' : 'python'
  eBookConfig.runestone_version = '6.6.2';
  eBookConfig.jobehost = 'https://red-voice-1370.fly.dev/http://jobe2.cosc.canterbury.ac.nz';
  eBookConfig.proxyuri_runs = '/jobe/index.php/restapi/runs/';
  eBookConfig.proxyuri_files = '/jobe/index.php/restapi/files/';
  eBookConfig.enable_chatcodes = false ? false : false;
  eBookConfig.enableScratchAC = true;

</script>

<!-- Ad Serving Headers Only serve ads to Anonymous Users -->



  </head><body>


<!-- Begin navbar -->
<div id="navbar" class="navbar navbar-default navbar-fixed-top" role="navigation">

  <div class="container">

    <div class="navbar-header">
      <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
      <button type='button' class='navbar-toggle' data-toggle="collapse" data-target=".navbar-ex1-collapse" aria-label="navbar toggle">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div>
        
        
          <div class="brand-logo"><img src="../_static/img/RAIcon.png" alt=""></div>
        
        <a class="navbar-brand" href="../index.html" aria-label="index-page">
          
          cisc187-reader
        </a>
      </div>
    </div>



    <div class="navbar-collapse collapse navbar-ex1-collapse">
      <ul class="nav navbar-nav navbar-right" >

        <li class="divider-vertical"></li>

        <!-- social media dropdown -->
        <!-- end social media dropdown -->

        <li class="divider-vertical"></li>
        <!-- search dropdown -->
        <li class="dropdown">
          <a class="dropdown-toggle" href="#" data-toggle="dropdown">
            <i class="glyphicon glyphicon-search" style='opacity:0.9;'><span class="visuallyhidden" aria-label="Search">Search</span></i>
          </a>
          <ul class='dropdown-menu'>
            
                <li><a href='../index.html' aria-label="index-page">Table of Contents</a></li>
            
            <li><a href='../genindex.html'>Book Index</a></li>
            <li class="divider"></li>
            <li style="width: 240px;">
              <form class="navbar-search" style="margin:10px;" action="../search.html" method="get">
                <div class="input-group">
                  <input type="text" class="form-control" name="q" placeholder="Search this book" />
                  <span class="input-group-btn">
                    <button class="btn btn-primary" style="margin:0;" type="submit">
                      <i class="glyphicon glyphicon-search"></i>
                    </button>
                  </span>
                </div><!-- /input-group -->
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
            </li>
          </ul>
        </li>
        <!-- end search dropdown -->

        <li class="divider-vertical"></li>

        
        <li class="divider-vertical"></li>
        <!-- <li id="scratch_ac_link"><a href="javascript:ACFactory.toggleScratchActivecode()">Scratch ActiveCode</a></li> -->

        <!-- <li class="dropdown">             -->
          <li id="scratch_ac_link" class="dropdown"><a href="javascript:runestoneComponents.popupScratchAC()">
              <i class="glyphicon glyphicon-pencil" style="opacity:0.9;"><span class="visuallyhidden" aria-label="Scratch Activecode" >Scratch Activecode</span></i></a></li>
        <!-- </li> -->

        <li class="divider-vertical"></li>

        
      </ul>

      <ul class="nav navbar-nav">
        <li class="divider-vertical"></li>
        
          
          <li class="divider-vertical"></li>
        
        <!-- 
          
  <li id="relations-prev" title="Previous Chapter - <span class="section-number">12.1. </span>The Adapter pattern" data-toggle="tooltip">
    <a href="adapter.html" >
      <i class='glyphicon glyphicon-backward' style='opacity:0.9;'></i>
    </a>
  </li>
  
  <li id="relations-next" title='Next Chapter - <span class="section-number">12.3. </span>The queue class' data-toggle="tooltip" >              
    <a href="queue.html" >
        <i class='glyphicon glyphicon-forward' style='opacity:0.9;'></i>
    </a>
  </li>
  <li class="divider-vertical"></li>

<script>
  opts = {'placement':'bottom',
          'selector': '',
          'delay': { show: 100, hide: 50}
         };

  window.addEventListener('load', (event) => {
    $('#relations-prev').tooltip(opts);
    $('#relations-next').tooltip(opts);
  });
</script>
        -->
        
          <li></li>
        
      </ul>
      </div> <!-- navbar-collapse -->
    </div> <!-- navbar -->
  </div> <!-- container -->


<div class="container" id="continue-reading"></div>

<div class="container" id="main-content" role="main">

<!-- Ad Serving for Runestone Campaign -->


  
  <section id="the-stack-class">
<span id="index-0"></span><h1><span class="section-number">12.2. </span>The stack class<a class="headerlink" href="#the-stack-class" title="Permalink to this heading">Â¶</a></h1>
<p>Sometimes we want to limit access to all parts of a sequential
data structure.
In other words, we want to store as much data as we want to,
but we want to restrict the ability to access any element at random.
One way to limit access to only one end of a container is to use
a <a class="reference external" href="https://en.cppreference.com/w/cpp/container/stack">stack</a>.</p>
<p>Imagine creating a pile by adding items one at a time on top of each other:</p>
<ul class="simple">
<li><p>plates</p></li>
<li><p>pancakes</p></li>
<li><p>sheets of paper</p></li>
<li><p>stones</p></li>
</ul>
<p>Any of these visual analogies you prefer will work.
Each of them is a <em>stack</em>.
In each case, adding items to the top of the stack
makes other items deeper in the stack inaccessible.
The only way to observe or remove an item from the stack
is to remove all of the items above it first.</p>
<p>Because the first item added to a stack is also the item
farthest from the top of the stack,
we refer to a stack as a
Last-In-First-Out (LIFO) data structure.</p>
<p>The <a class="reference external" href="https://en.cppreference.com/w/cpp/container/stack">std::stack</a> is a container adapter that gives the programmer the
functionality of a stack.</p>
<p>The class template acts as a wrapper to the underlying container - only
a specific set of functions is provided.
The stack pushes and pops the element from the back of the underlying container,
known as the top of the stack.</p>
<p>Given a <code class="docutils literal notranslate"><span class="pre">std::stack&lt;T&gt;</span></code>, the defining operations of a <a class="reference external" href="https://en.cppreference.com/w/cpp/container/stack">stack</a> are:</p>
<dl class="simple">
<dt>void push (T value)</dt><dd><p>Add a new element to the top of the stack.</p>
</dd>
<dt>void pop()</dt><dd><p>Remove an element from the top of the stack.</p>
</dd>
<dt>T top()</dt><dd><p>Get the value of the element at the top of the stack.</p>
</dd>
</dl>
<div align="center" class="align-center"><div class="graphviz"><img src="../_images/graphviz-1d1a07f3ac556e9e77996c9e41bcad10719e88c3.png" alt="std::stack elements" class="graphviz" /></div>
</div>
<div id='tab_stack_ex_1' data-component="tabbedStuff"  class='alert alert-warning '><div data-component="tab" data-tabname="Using std::stack" >
<p>Before running the following example, predict the output,
then check yourself.</p>

<div class="runestone explainer ac_section ">
<div data-component="activecode" id=stack_using_stack_simple_ac1 data-question_label="12.2.1">
<div id=stack_using_stack_simple_ac1_question class="ac_question">

</div>
<textarea data-lang="cpp" id="stack_using_stack_simple_ac1_editor" 
      data-timelimit=25000     
    data-audio=''      
    data-compileargs="[&#x27;-Wall&#x27;, &#x27;-Wextra&#x27;, &#x27;-std=c++11&#x27;]"       data-wasm=/_static
     style="visibility: hidden;">
#include <iostream>
#include <stack>
#include <string>

using std::cout;
using std::stack;

// remove all elements from a stack and print them out
template <class Container>
void pop_all(Container& s) {
  while(!s.empty()) {
    cout << s.top() << " ";
    s.pop();
  }
  cout << "\npopped all from stack\n";
}

int main () {
  stack<std::string> strings;
  cout << "push strings onto stack...\n";
  strings.push("one");
  strings.push("two");
  strings.push("three");
  strings.push("four");
  strings.push("five");

  cout << "size of stack before: " << strings.size() << '\n';
  pop_all (strings);
  cout << "size of stack after: " << strings.size() << '\n';
  if (strings.empty()) {
    cout << "stack is empty.\n";
  }


  return 0;
}
</textarea>
</div>
</div>
</div>
    </div>

<p>It is also possible to initialize a stack from another container.
The initializing container must match the container adapted for the
stack instance.
By default, <a class="reference external" href="https://en.cppreference.com/w/cpp/container/deque">deque</a> is used,
but any container that provides</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">back()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">push_back()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pop_back()</span></code></p></li>
</ul>
<p>can be used as a stack adapter.
In the STL, besides deque, <a class="reference external" href="https://en.cppreference.com/w/cpp/container/vector">vector</a> and <a class="reference external" href="https://en.cppreference.com/w/cpp/container/list">list</a> also
can be adapted by a stack.</p>
<div align="center" class="align-center"><div class="graphviz"><img src="../_images/graphviz-c58eb1ba3f3adca7842bcc65e4a3a4d9f6acd215.png" alt="The stack adapter" class="graphviz" /></div>
</div>
<div id='tab_stack_initializers_1' data-component="tabbedStuff"  class='alert alert-warning '><div data-component="tab" data-tabname="Initializers" >
<p>Because the default backing store for a stack is a deque,
a container adapter does not need to be specified.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// initialize stack from deque</span>
<span class="n">std</span><span class="o">::</span><span class="n">deque</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="p">};</span>
<span class="n">stack</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">numbers</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>
</pre></div>
</div>
<p>To copy a list into a stack will only work if the
stack instance uses a list as its backing store.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// initialize stack from list</span>
<span class="n">std</span><span class="o">::</span><span class="n">list</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="p">};</span>
<span class="n">stack</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">list</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">numbers</span><span class="p">(</span><span class="n">y</span><span class="p">);</span>
</pre></div>
</div>
</div><div data-component="tab" data-tabname="Run It" >
<p>Before running the following example, predict the output,
then check yourself.</p>

<div class="runestone explainer ac_section ">
<div data-component="activecode" id=stack_list_initializer_ac data-question_label="12.2.2">
<div id=stack_list_initializer_ac_question class="ac_question">

</div>
<textarea data-lang="cpp" id="stack_list_initializer_ac_editor" 
      data-timelimit=25000     
    data-audio=''      
    data-compileargs="[&#x27;-Wall&#x27;, &#x27;-Wextra&#x27;, &#x27;-std=c++11&#x27;]"       data-wasm=/_static
     style="visibility: hidden;">
#include <iostream>
#include <stack>
#include <list>

using std::cout;
using std::stack;

// remove all elements from a stack and print them out
template <class Container>
void pop_all(Container& s) {
  while(!s.empty()) {
    cout << s.top() << " ";
    s.pop();
  }
  cout << "\npopped all from stack\n";
}

int main () {
  cout << "initialize stack from list:\n";
  std::list<int> tmp = { 1, 2, 3, 4, 5 };
  stack<int, std::list<int>> numbers(tmp);

  cout << "list has " << tmp.size() << " entries\n";
  pop_all (numbers);
  if (numbers.empty()) {
    cout << "stack is empty.\n";
  }

  return 0;
}
</textarea>
</div>
</div>
</div>
    </div>

<p>Notice the elements from the list are pushed onto the stack in the order
they are retrieved from the list.
The number <code class="docutils literal notranslate"><span class="pre">1</span></code> is pushed first, so when initialization is complete,
it is on the bottom of the stack.</p>
<p>Stack elements <strong>cannot</strong> be accessed directly in the way
you are used to with other sequential containers like
arrays, vectors, and lists.
To âvisitâ each element in a <code class="docutils literal notranslate"><span class="pre">stack</span></code>, the items need to be popped off.</p>
<p>If you think you need to visit all the elements in a <code class="docutils literal notranslate"><span class="pre">stack</span></code>,
then you probably should not be using a <code class="docutils literal notranslate"><span class="pre">stack</span></code>.</p>
<section id="postfix-notation">
<h2><span class="section-number">12.2.1. </span>Postfix Notation<a class="headerlink" href="#postfix-notation" title="Permalink to this heading">Â¶</a></h2>
<p>A compiler generates machine instructions required to carry out the statements
of a source program written in a high-level language.
One part of this task is to generate instructions for
evaluating arithmetic expressions such as</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="n">b</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">c</span><span class="p">);</span>
</pre></div>
</div>
<p>In most programming languages,
arithmetic expressions are written using <strong>infix notation</strong>
as in the above example.
The symbol for each binary operation is placed between the operands.
Many compilers first transform infix expressions into <strong>postfix notation</strong>,
and then generates machine instructions to evaluate these postfix expressions.
This two-step process is used because
transformations from infix to postfix is straightforward,
and postfix expressions are generally easier to evaluate than infix expressions.</p>
<p>In postfix notation the operator follows the operands and parentheses
are not needed.
In the earlier example, the infix expression:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="mi">2</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="mi">3</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">5</span><span class="p">);</span>
</pre></div>
</div>
<p>can be re-written as a postfix expression:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="o">*</span>
</pre></div>
</div>
<p>Evaluation this expression proceeds left to right:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Scan numbers until the first operator is encountered</span>
<span class="c1">// operate on the operands immediately to the left</span>
<span class="c1">// of the operator</span>
<span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="o">*</span>

<span class="c1">// becomes</span>
<span class="mi">2</span><span class="w"> </span><span class="mi">8</span><span class="w"> </span><span class="o">*</span>

<span class="c1">// which becomes</span>
<span class="mi">16</span>
</pre></div>
</div>
<p>This method of evaluating a postfix expression requires that the operands be
stored until an operator is encountered in the left-to-right scan.
Once an operator is found,
the last two operands must be retrieved and combined using
the operation encountered.
This suggests that a stack should be used to store the operands.</p>
<p>Each time an operand is encountered,
it is pushed onto the stack.
Then, when an operator is encountered,
the top two values are popped from the stack;
the operation is applied to them,
and the result is pushed back onto the stack.</p>
<hr class="docutils" />
<div class="admonition-more-to-explore admonition">
<p class="admonition-title">More to Explore</p>
<ul class="simple">
<li><p><a class="reference external" href="http://en.cppreference.com/w/cpp/container">STL containers library</a></p></li>
<li><p>STL <a class="reference external" href="https://en.cppreference.com/w/cpp/container/stack">stack</a> class</p></li>
<li><p><a class="reference external" href="http://www.mycodeschool.com">MyCodeSchool</a> video:
<a class="reference external" href="https://www.youtube.com/watch?v=F1F2imiOJfk&amp;list=PL2_aWCzGMAwI3W_JlcBbtYTwiQSsOTa6P&amp;index=14">Data structures: introduction to stack</a></p></li>
</ul>
</div>
</section>
</section>


  

  <div id="scprogresscontainer">
    You have attempted <span id="scprogresstotal"></span> of <span id="scprogressposs"></span> activities on this page <div id="subchapterprogress" aria-label="Page progress"></div>
  </div>

  <ul role="navigation" class="nextprev-list nextprev-list" aria-label="Change page">
<li id="relations-prev" class="navLink" title='Previous Section - 12.1. The Adapter pattern' data-toggle="tooltip">
  <a href="adapter.html" aria-label="Previous - 12.1. The Adapter pattern">
    <i class='prevNav glyphicon glyphicon-chevron-left'  style="top:50%; transform:translateY(-50%)translateX(-50%); left: 50%; color:black;"></i>
  </a>
</li>

  <li id="relations-next" class="navLink" title='Next Section - 12.3. The queue class' data-toggle="tooltip" >
    <a href="queue.html" aria-label="Next - 12.3. The queue class">
      <i id="relationsNextIcon" class='nextNav glyphicon glyphicon-chevron-right' style="top:50%; transform:translateY(-50%)translateX(-50%); left: 50%; color:black; "></i>
    </a>
  </li>
</ul>

<script>
window.addEventListener('load', (event) => {
  $('#relations-prev').tooltip({'placement': 'right', 'delay': { show: 100, hide: 50}});
  $('#relations-next').tooltip({'placement': 'left', 'delay': { show: 100, hide: 50}});
});
</script>

</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      
      | <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2017-2023 Dave Parillo.
      Created using <a href="http://runestoneinteractive.org/">Runestone</a> 6.6.2.
    </p>
  </div>
</footer>




<script>
  window.addEventListener('load', (event) => {
    runestoneComponents.getSwitch();
  });
</script>


  </body>
</html>